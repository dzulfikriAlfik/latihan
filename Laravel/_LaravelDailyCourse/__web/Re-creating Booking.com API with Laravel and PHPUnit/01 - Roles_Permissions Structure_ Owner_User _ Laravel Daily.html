<!DOCTYPE html>
<!-- saved from url=(0090)https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" id="mobile-simulator">
        window.hasMobileFirstExtension = true;</script><meta http-equiv="origin-trial" content="Az520Inasey3TAyqLyojQa8MnmCALSEU29yQFW8dePZ7xQTvSt73pHazLFTK5f7SyLUJSo2uKLesEtEa9aUYcgMAAACPeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZS5jb206NDQzIiwiZmVhdHVyZSI6IkRpc2FibGVUaGlyZFBhcnR5U3RvcmFnZVBhcnRpdGlvbmluZyIsImV4cGlyeSI6MTcyNTQwNzk5OSwiaXNTdWJkb21haW4iOnRydWUsImlzVGhpcmRQYXJ0eSI6dHJ1ZX0=">
    

    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta property="og:type" content="website">







    <title>01 - Roles/Permissions Structure: Owner/User | Laravel Daily</title>

    <link rel="shortcut icon" type="image/png" href="https://laraveldaily.com/favicon.png">

    <link href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/css2" rel="stylesheet">

    <link rel="preload" as="style" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/app.464a3c77.css"><link rel="modulepreload" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/app.c5e126dd.js.download"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/app.464a3c77.css"><script type="text/javascript" async="" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/analytics.js.download"></script><script type="text/javascript" async="" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/js"></script><script async="" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/matomo.js.download"></script><script type="text/javascript" async="" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/recaptcha__en.js.download" crossorigin="anonymous" integrity="sha384-TFHQ2jjldnEXG6p4acHgAFLMc2UFrK8wxiDKLT6JmJU7fdX8X8zXqEhV8ZJ1n4iu"></script><script type="module" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/app.c5e126dd.js.download"></script>    <style>[wire\:loading], [wire\:loading\.delay], [wire\:loading\.inline-block], [wire\:loading\.inline], [wire\:loading\.block], [wire\:loading\.flex], [wire\:loading\.table], [wire\:loading\.grid], [wire\:loading\.inline-flex] {display: none;}[wire\:loading\.delay\.shortest], [wire\:loading\.delay\.shorter], [wire\:loading\.delay\.short], [wire\:loading\.delay\.long], [wire\:loading\.delay\.longer], [wire\:loading\.delay\.longest] {display:none;}[wire\:offline] {display: none;}[wire\:dirty]:not(textarea):not(input):not(select) {display: none;}input:-webkit-autofill, select:-webkit-autofill, textarea:-webkit-autofill {animation-duration: 50000s;animation-name: livewireautofill;}@keyframes livewireautofill { from {} }</style>
    <style>
    :root {
    --comments-spacing: 2.5rem;
    --comments-avatar-size: 1.5rem;
    --comments-avatar-margin: 0.35rem;
    --comments-border-radius: 0.3rem;
    --comments-z-modal: 2;

    /* colors */
    --comments-color-background: white;
    --comments-color-background-nested: white;
    --comments-color-background-paper: rgb(249, 250, 251);
    --comments-color-background-info: rgb(237, 235, 252);

    --comments-color-reaction: rgb(238, 239, 240);
    --comments-color-reaction-hover: rgb(229, 231, 235);
    --comments-color-reacted: rgba(67, 56, 202, 0.2);
    --comments-color-reacted-hover: rgba(67, 56, 202, 0.35);

    --comments-color-border: rgb(221, 221, 221);

    --comments-color-text:rgb(17, 24, 39);
    --comments-color-text-dimmed: rgb(156, 163, 175);
    --comments-color-text-inverse: white;

    --comments-color-accent: rgba(67, 56, 202);
    --comments-color-accent-hover: rgba(67, 56, 202, 0.8);

    --comments-color-danger: rgb(225, 29, 72);
    --comments-color-danger-hover: rgb(225, 29, 72, 0.8);

    --comments-color-success: rgb(10, 200, 134);
    --comments-color-success-hover: rgb(10, 200, 134, 0.8);

    --comments-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
}

@media (min-width: 768px) {
    :root {
        --comments-avatar-size: 2.5rem;
        --comments-avatar-margin: 0.75rem;
    }
}

.comments {
    color: var(--comments-color-text);
}

.comments-avatar {
    width: var(--comments-avatar-size);
    height: var(--comments-avatar-size);
    border-radius: var(--comments-avatar-size);
    margin-right: var(--comments-avatar-margin);
}

/** Added to win agains Tailwind CDN specificity */
.comments-button.comments-button {
    border-radius: var(--comments-border-radius);
    color: var(--comments-color-text-inverse);
    background-color: var(--comments-color-accent);
    padding: 0.25rem 0.75rem;
    font-weight: 500;
    line-height: 1.35;
    transition: background 150ms;
}

.comments-button:hover {
    background-color: var(--comments-color-accent-hover);
}

.comments-button.is-small {
    padding: 0.15rem 0.5rem;
    font-size: 0.8rem;
}

.comments-button.is-link {
    background-color: transparent;
    color: var(--comments-color-text-dimmed);
    text-decoration: underline;
}

.comments-button.is-danger {
    background-color: var(--comments-color-danger);
}

.comments-button.is-danger:hover {
    background-color: var(--comments-color-danger-hover);
}

.comments-button.is-success {
    background-color: var(--comments-color-success);
}

.comments-button.is-success:hover {
    background-color: var(--comments-color-success-hover);
}

.comments-button svg {
    stroke: var(--comments-color-text-inverse);
}

.comments-comment {
    display: flex;
}

.comments-nested .comments-comment{
    background-color: var(--comments-color-background-nested);
    padding: 0;
}

.comments-comment-inner {
    flex-grow: 1;
}

.comments-comment-header {
    position: relative;
    font-weight: 500;
    color: var(--comments-color-text);
    margin-bottom: 0.5rem;
}

@media (min-width: 768px) {
    .comments-comment-header {
        display: flex;
        align-items: baseline;
    }
}

.comments-comment-header-actions {
    display: flex;
    flex-wrap: wrap;
    color: var(--comments-color-text-dimmed);
    font-size: 0.8rem;
}

@media (min-width: 768px) {
    .comments-comment-header-actions {
        margin-left: 0.5rem;
    }
}

.comments-comment-header-actions li {
    display: flex;
    position: relative;
}

.comments-comment-header-actions li:not(:last-child):after {
    content: "•";
    margin: 0 0.25rem;
}

.comments-comment-header-actions li > a:hover,
.comments-comment-header-actions li > button:hover {
    text-decoration: underline;
}

.comments-comment-header-copied {
    position: absolute;
    left: 0;
    bottom: 100%;
    font-size: 0.65rem;
    white-space: nowrap;
    color: var(--comments-color-success);
}

.comments-error {
    margin-top: 0.5rem;
    font-size: 0.875rem;
    color: var(--comments-color-danger);
}

.comments-form {
    display: flex;
    position: relative;
}

.comments-form-inner {
    flex-grow: 1;
}

.comments-form-inner button {
    margin-top: 0.5rem;
}

.comments-form-editor-tip {
    color: var(--comments-color-text-dimmed);
    font-size: 0.8rem;
    padding: 0.25rem 0;
    text-align: right;
}

.comments-form-editor-tip a {
    text-decoration: underline;
}

.comments-newest-first > .comments-form {
    margin-bottom: var(--comments-spacing);
}

.comments-group {
    position: relative;
    padding-bottom: var(--comments-spacing);
    margin-bottom: var(--comments-spacing);
}

.comments-group:target {
    margin-top: calc(-1 * var(--comments-spacing));
    margin-left: calc(-0.5 * var(--comments-spacing));
    margin-right: calc(-0.5 * var(--comments-spacing));
    padding-top: var(--comments-spacing);
    padding-left: calc(0.5 * var(--comments-spacing));
    padding-right: calc(0.5 * var(--comments-spacing));
    animation: highlight 1.5s ease-in-out;
    border: solid 1px var(--comments-color-accent);
    border-radius: var(--comments-border-radius);
}

@keyframes highlight {
    0% {
        transform: scale(1);
    }
    5% {
        transform: scale(1);
    }
    15% {
        transform: scaleX(1.015);
    }
    50% {
        transform: scale(1);
    }
    100% {
        transform: scale(1);
    }
}

.comments-group:after {
    content: "";
    position: absolute;
    bottom: 0;
    right: 0;
    left: 0;
    border-bottom: 1px solid var(--comments-color-border);
}

.comments-group.comments-group-with-avatars:after {
    /* Offset the border to stay lined up with the avatar */
    left: calc(var(--comments-avatar-size) + var(--comments-avatar-margin));
}

.comments-group .comments-group {
    padding-bottom: 0;
    margin-top: calc(var(--comments-spacing) * 0.66);
    margin-bottom: 0;
}

.comments-group .comments-group:after {
    content: none;
}

.comments-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: var(--comments-spacing);
}

.comments-header strong {
    font-size: 1.125rem;
    font-weight: 500;
}

.comments-icon {
    height: 1.25rem;
    width: 1.25rem;
    stroke: var(--comments-color-text);
}

.comments-approval {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 2rem;
    background-color: var( --comments-color-background-info);
    border-radius: var(--comments-border-radius);
    padding: 0.5rem;
    font-size: 0.8rem;
    margin-bottom: 0.5rem;
}

.comments-approval-buttons {
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.comments-modal {
    position: absolute;
    z-index: var(--comments-z-modal);
    color: var(--comments-color-text);
    font-size: 1rem;
    background-color: var( --comments-color-background);
    box-shadow: var( --comments-shadow);
    border-radius: var(--comments-border-radius);
    top: 0;
    right: 0;
    padding: 1rem;
}

.comments-modal.is-left {
    right: auto;
    left: 0;
}

.comments-modal.is-bottom {
    top: 100%;
}

.comments-modal.is-compact {
    padding: 0.5rem;
}

.comments-modal-title {
    font-weight: 500;
    white-space: nowrap;
}

.comments-modal-contents {
    font-weight: normal;
    line-height: 1.25;
}

.comments-modal-contents p {
    margin-bottom: 0.5rem;
    min-width: 8rem;
}

@media (min-width: 768px) {
    .comments-modal-contents p {
        min-width: 12rem;
    }
}

.comments-modal-contents .comments-button {
    float: right;
}

.comments-nested {
    margin-top: calc(var(--comments-spacing) * 0.66);
    padding-left: calc(var(--comments-avatar-size) + var(--comments-avatar-margin));
}

.comments-no-comment-yet {
    text-align: center;
    margin: 2rem 0 4rem 0;
    color: var(--comments-color-text-dimmed);
}

.comments-placeholder,
.comments-textarea {
    border: 1px solid var(--comments-color-border);
    border-radius: 4px;
    width: 100%;
    padding: 10px;
    height: var(--comments-avatar-size);
}

.comments-placeholder:focus {
    outline: none;
}

.comments-reactions {
    position: relative;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.5rem;
    margin-top: 0.75rem;
}

.comments-reaction {
    display: flex;
    align-items: center;
    white-space: nowrap;
    border-radius: var(--comments-border-radius);
    cursor: pointer;
    background-color: var(--comments-color-reaction);
    padding: 0 0.5rem;
    height: 1.5rem;
    font-size: 0.8rem;
    transition: background 150ms;
}

.comments-reaction:hover {
    background-color: var(--comments-color-reaction-hover);
}

.comments-reaction.is-reacted {
    border: 1px solid var(--comments-color-accent);
    background-color: var(--comments-color-reacted);
}

.comments-reaction.is-reacted:hover {
    background-color: var(--comments-color-reacted-hover);
}

.comments-reaction-picker {
    position: relative;
}

/** Added to win agains Tailwind CDN specificity */
.comments-reaction-picker-trigger.comments-reaction-picker-trigger {
    display: flex;
    align-items: center;
    height: 1.5rem;
    padding: 0 0.5rem;
    cursor: pointer;
    border-radius: var(--comments-border-radius);
    background-color: var(--comments-color-reaction);
    transition: background 150ms;
}

.comments-reaction-picker-trigger:hover {
    background-color: var(--comments-color-reaction-hover);
}

.comments-reaction-picker-reactions {
    display: grid;
    gap: 0.25rem;
}

@media (min-width: 480px) {
    .comments-reaction-picker-reactions {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (min-width: 768px) {
    .comments-reaction-picker-reactions {
        grid-template-columns: repeat(5, 1fr);
    }
}

.comments-reaction-picker-reaction {
    height: 1.75rem;
    padding: 0 0.25rem;
    border-radius: var(--comments-border-radius);
    cursor: pointer;
    transition: background 150ms;
}

.comments-reaction-picker-reaction:hover {
    background-color: var(--comments-color-reaction);
}

.comments-reaction-picker-reaction.is-reacted {
    background-color: var(--comments-color-reacted);
}

.comments-reaction-picker-reaction.is-reacted:hover {
    background-color: var(--comments-color-reacted-hover);
}

.comments-reply {
    margin-top: calc(var(--comments-spacing) * 0.66);
}

.comments-subscription {
    position: relative;
    margin-left: auto;
    font-size: 0.8rem;
}

.comments-subscription-trigger {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.25rem 0.5rem;
    border-radius: var(--comments-border-radius);
    background-color: var(--comments-color-reaction);
    font-weight: 600;
    transition: background 150ms;
}

.comments-subscription-trigger:hover {
    background-color: var(--comments-color-reaction-hover);
}

.comments-subscription-item {
    width: 100%;
    padding: 0.5rem 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    font-size: 0.8rem;
    font-weight: 500;
    text-align: left;
    white-space: nowrap;
    border-radius: var(--comments-border-radius);
    transition: background 150ms;
}

.comments-subscription-item:hover {
    background-color: var(--comments-color-reaction);
}

.comment-text {
    max-width: calc(100% - var(--comments-avatar-size));
}

.comment-text > *,
.comments-comment-inner {
    max-width: 100%;
}

.comment-text code {
    padding: 0.2rem 0.5rem;
    background-color: var(--comments-color-background-paper);
    border-radius: 0.3rem;
}

.comment-text .shiki {
    font-size: 0.85rem;
}

.comment-text .shiki code {
    padding: 0;
    background-color: transparent;
}

.comment-text .shiki {
    padding: 0.5rem;
    margin: 0.5rem 0;
    border-radius: 0.2rem;
    background-color: var(--comments-color-background-paper) !important;
    overflow: hidden;
    overflow-x: scroll;
}

.comment-text a {
    color: var(--comments-color-accent);
    text-decoration: underline;
}

.comment-text > *:not(:first-child),
.comment-text blockquote > *:not(:first-child),
.comment-text ul > *:not(:first-child):not(li),
.comment-text ol > *:not(:first-child):not(li) {
    margin-top: 0.5rem;
}

.comment-text h1 {
    font-size: 2rem;
    font-weight: bold;
}

.comment-text h2 {
    font-size: 1.7rem;
    font-weight: bold;
}

.comment-text h3 {
    font-size: 1.5rem;
    font-weight: bold;
}

.comment-text h4 {
    font-size: 1.3rem;
    font-weight: bold;
}

.comment-text h5 {
    font-size: 1.1rem;
    font-weight: bold;
}

.comment-text h6 {
    font-size: 1rem;
    font-weight: bold;
}

.comment-text blockquote {
    background-color: var(--comments-color-background-paper);
    padding: 1rem;
    border-left: solid 3px var(--comments-color-border);
}

.comment-text ul, .comment-text ol {
    padding-left: 1rem;
}

.comment-text ul li {
    list-style: circle;
}

.comment-text ol li {
    list-style: decimal;
}

.comments-textarea {
    min-height: 10rem;
}


/* EasyMDE buttons */
.comments .CodeMirror {
    border-color: var(--comments-color-border);
}

.comments .CodeMirror-scroll, .CodeMirror{
    min-height: 10rem !important;
}

.comments .editor-toolbar {
    border-color: var(--comments-color-border);
    padding: 0.35rem;
}

.comments .editor-toolbar .separator {
    border-left-color: var(--comments-color-border);
}

.comments .editor-toolbar button {
    border: none;
    transition: background 150ms;
}
.comments .editor-toolbar button:hover {
    background-color: var(--comments-color-reaction);
}

.comments .editor-toolbar button.active {
    background-color: var(--comments-color-reaction-hover);
}

</style>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/js(1)"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-64361490-1');
    </script>
    <script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/api.js.download"></script>
    <!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//analytics.laraveldaily.com/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '1']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
        <script>
        window.addEventListener('refresh-page', function (event) {
            window.location.reload(false);
        });
    </script>
<style type="text/css">#mc_embed_signup input.mce_inline_error { border-color:#6B0505; } #mc_embed_signup div.mce_inline_error { margin: 0 0 1em 0; padding: 5px 10px; background-color:#6B0505; font-weight: bold; z-index: 1; color:#fff; }</style><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.js.download"></script><link type="text/css" rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/easymde.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"><link rel="stylesheet" href="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/font-awesome.min.css"></head>

<body class="font-sans antialiased text-gray-800 flex flex-col min-h-screen" style="zoom: 1;">
    
    
    
    <header class="relative z-10 text-white" x-data="{ open: false }">
    <div class="container relative z-10 max-w-screen-2xl">
        <nav class="flex items-center justify-between h-20 gap-12">
            <a href="https://laraveldaily.com/" class="inline-flex items-center gap-3 text-lg font-bold md:text-xl">
                <div class="flex items-center justify-center w-8 h-8 rounded-lg shadow-lg border-y shadow-primary-700/20 bg-gradient-to-b from-primary-500 to-primary-600 border-t-primary-400 border-b-primary-700">
                    <img class="w-4 h-4" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/mono.svg" alt="">
                </div>

                <span>Laravel Daily</span>
            </a>

            <ul class="items-center hidden gap-8 text-sm font-medium lg:flex">
                <li>
    <a class="transition relative h-20 inline-flex items-center text-gray-300 hover:text-white" href="https://laraveldaily.com/courses">Courses</a>
</li>

                <li>
    <a class="transition relative h-20 inline-flex items-center text-gray-300 hover:text-white" href="https://laraveldaily.com/tag/premium-tutorials">Premium Tutorials</a>
</li>

                <li>
    <a class="transition relative h-20 inline-flex items-center text-gray-300 hover:text-white" href="https://laraveldaily.com/tips">Quick Tips</a>
</li>

                <li>
    <a class="transition relative h-20 inline-flex items-center text-gray-300 hover:text-white" href="https://laraveldaily.com/roadmap-learning-path">Learning Roadmap</a>
</li>

                <div class="relative" x-data="{ open: false }" @click.outside="open = false" @close.stop="open = false">
    <div @click="open = ! open">
        <button class="flex items-center text-gray-300 hover:text-white focus:text-white transition duration-150 ease-in-out">
                            <div class="capitalize">Resources</div>

                            <div class="ml-1">
                                <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path>
</svg>
                            </div>
                        </button>
    </div>

    <div x-show="open" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="transform opacity-0 scale-95" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-95" class="absolute z-50 mt-2 w-48 rounded-lg shadow-lg origin-top-left left-0" style="display: none;" @click="open = false">
        <div class="rounded-md ring-1 ring-black ring-opacity-5 py-2 bg-gray-900">
            <a href="https://laraveldaily.com/packages" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out">Packages</a>

                        <a href="https://laraveldaily.com/code-examples/projects" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out">Projects</a>

                        <a href="https://laraveldaily.com/code-examples" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out">Code examples</a>

                        <a href="https://laraveldaily.com/jobs/offers" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out">Job offers</a>

                        <a href="https://laraveldaily.com/premium-tools" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out">Premium tools</a>

                        <a href="https://laraveldaily.com/people-to-follow" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out">People to Follow</a>

                        <a href="https://laraveldaily.com/webinars" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out">Webinars</a>

                        <a href="https://laraveldaily.com/project-ideas" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out">Project Ideas</a>

                        <a href="https://laraveldaily.com/jobs/developer-profiles" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out">Developer profiles</a>
        </div>
    </div>
</div>

                <li>
    <a class="transition relative h-20 inline-flex items-center text-gray-300 hover:text-white" href="https://us11.campaign-archive.com/home/?u=a459401212599a54203d036ee&amp;id=91c1337873" target="_blank">Newsletter</a>
</li>

                <li>
    <a class="transition relative h-20 inline-flex items-center text-gray-300 hover:text-white" href="https://laraveldaily.com/pricing">Pricing</a>
</li>

                
                <li role="divider" class="h-4 border-l border-gray-600"></li>

                <li class="-mr-2">
                    <button class="font-medium text-gray-400 button button--secondary" @click="$dispatch(&#39;toggle-spotlight&#39;)">
                        <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path>
</svg>
                        <span class="pr-3 font-bold">Search</span>
                    </button>
                </li>

                
                                    <div class="relative" x-data="{ open: false }" @click.outside="open = false" @close.stop="open = false">
    <div @click="open = ! open">
        <button class="flex items-center text-gray-300 hover:text-white focus:text-white transition duration-150 ease-in-out">
                                <div class="inline font-semibold truncate max-w-username overflow-hidden">Dzulfikri Alkautsari</div>

                                <div class="ml-1">
                                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                            </button>
    </div>

    <div x-show="open" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="transform opacity-0 scale-95" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-95" class="absolute z-50 mt-2 w-48 rounded-lg shadow-lg origin-top-right right-0" style="display: none;" @click="open = false">
        <div class="rounded-md ring-1 ring-black ring-opacity-5 py-2 bg-gray-900">
            <a href="https://laraveldaily.com/account/courses" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out"><svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"></path>
</svg>                                My courses</a>

                            <a href="https://laraveldaily.com/account/comments" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out"><svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1H2zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z"></path>
</svg>                                My comments</a>

                            <a href="https://laraveldaily.com/billing" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out"><svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v1H0V4zm0 3v5a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7H0zm3 2h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"></path>
</svg>                                My membership</a>

                            <a href="https://laraveldaily.com/account/overview" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out"><svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M7.068.727c.243-.97 1.62-.97 1.864 0l.071.286a.96.96 0 0 0 1.622.434l.205-.211c.695-.719 1.888-.03 1.613.931l-.08.284a.96.96 0 0 0 1.187 1.187l.283-.081c.96-.275 1.65.918.931 1.613l-.211.205a.96.96 0 0 0 .434 1.622l.286.071c.97.243.97 1.62 0 1.864l-.286.071a.96.96 0 0 0-.434 1.622l.211.205c.719.695.03 1.888-.931 1.613l-.284-.08a.96.96 0 0 0-1.187 1.187l.081.283c.275.96-.918 1.65-1.613.931l-.205-.211a.96.96 0 0 0-1.622.434l-.071.286c-.243.97-1.62.97-1.864 0l-.071-.286a.96.96 0 0 0-1.622-.434l-.205.211c-.695.719-1.888.03-1.613-.931l.08-.284a.96.96 0 0 0-1.186-1.187l-.284.081c-.96.275-1.65-.918-.931-1.613l.211-.205a.96.96 0 0 0-.434-1.622l-.286-.071c-.97-.243-.97-1.62 0-1.864l.286-.071a.96.96 0 0 0 .434-1.622l-.211-.205c-.719-.695-.03-1.888.931-1.613l.284.08a.96.96 0 0 0 1.187-1.186l-.081-.284c-.275-.96.918-1.65 1.613-.931l.205.211a.96.96 0 0 0 1.622-.434l.071-.286zM12.973 8.5H8.25l-2.834 3.779A4.998 4.998 0 0 0 12.973 8.5zm0-1a4.998 4.998 0 0 0-7.557-3.779l2.834 3.78h4.723zM5.048 3.967c-.03.021-.058.043-.087.065l.087-.065zm-.431.355A4.984 4.984 0 0 0 3.002 8c0 1.455.622 2.765 1.615 3.678L7.375 8 4.617 4.322zm.344 7.646.087.065-.087-.065z"></path>
</svg>                                Account settings</a>

                            <a href="https://discord.gg/6y44kcX8tX" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out"><svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"></path>
</svg>                                Discord</a>

                            <form method="POST" action="https://laraveldaily.com/logout">
                                <input type="hidden" name="_token" value="7W86ZkmJCOG4YVVdPcGQ9Ly89FCOAbAZpcjS1AS9" autocomplete="off">
                                <a href="https://laraveldaily.com/logout" onclick="event.preventDefault();this.closest(&#39;form&#39;).submit();" class="flex gap-3 items-center px-4 py-3 hover:bg-gray-700 focus:outline-none focus:bg-gray-700 transition duration-150 ease-in-out"><svg class="w-4 h-4 text-primary-400" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"></path>
  <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"></path>
</svg>                                    <span class="text-primary-400">Log out</span></a>
                            </form>
        </div>
    </div>
</div>
                            </ul>

            <button type="button" x-on:click="open = !open" class="flex items-center justify-center gap-3 p-2 pl-3 text-sm font-medium text-gray-200 bg-gray-700 rounded lg:hidden border-b-transparent border-y border-t-gray-600">
                <span x-text="open ? &#39;Close&#39; : &#39;Menu&#39;">Menu</span>

                <svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"></path>
</svg>            </button>
        </nav>
    </div>

    <nav class="navbar--mobile hidden" :class="open || &#39;hidden&#39;" x-transition.origin.top="">
    <div class="border-t border-gray-700"></div>

    <div class="container max-w-screen-2xl">
                    <div class="px-3 pt-3">
                <div class="text-gray-300">Welcome back,</div>
                <div class="text-xl text-white font-bold heading-1 truncate">Dzulfikri Alkautsari</div>
            </div>
                <ul class="py-3 font-medium space-y-1">
            <li>
    <a class="text-gray-300 flex p-3 w-full items-center gap-3 hover:text-white hover:bg-gray-700 rounded-xl" href="https://laraveldaily.com/courses">Courses</a>
</li>

            <li>
    <a class="text-gray-300 flex p-3 w-full items-center gap-3 hover:text-white hover:bg-gray-700 rounded-xl" href="https://laraveldaily.com/tips">Quick Tips</a>
</li>

            <li>
    <a class="text-gray-300 flex p-3 w-full items-center gap-3 hover:text-white hover:bg-gray-700 rounded-xl" href="https://laraveldaily.com/tag/premium-tutorials">Premium Tutorials</a>
</li>

            <li>
    <a class="text-gray-300 flex p-3 w-full items-center gap-3 hover:text-white hover:bg-gray-700 rounded-xl" href="https://laraveldaily.com/roadmap-learning-path">Learning Roadmap</a>
</li>

            <div x-data="{open: false}" class="bg-gray-700/50 rounded-xl">
    <div @click="open = ! open" class="">
        <div class="flex p-3 w-full items-center justify-between gap-3 text-gray-300 capitalize cursor-pointer hover:text-white hover:bg-gray-600 rounded-xl" :class="{ &#39;rounded-t-xl&#39;: open, &#39;rounded-xl&#39;: !open }">
            Resources
            <div>
                <svg class="fill-current h-4 w-4" x-show="!open" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path>
</svg>
                <svg class="fill-current h-4 w-4 rotate-180" x-show="open" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" style="display: none;">
    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path>
</svg>
            </div>
        </div>
    </div>

    <div x-show="open" style="display: none;">
        <a class="flex px-3 py-3 w-full items-center gap-3 text-gray-300 hover:text-white hover:bg-gray-600 last:rounded-b-xl" href="https://laraveldaily.com/packages">
    Packages
</a>

                    <a class="flex px-3 py-3 w-full items-center gap-3 text-gray-300 hover:text-white hover:bg-gray-600 last:rounded-b-xl" href="https://laraveldaily.com/code-examples/projects">
    Projects
</a>

                    <a class="flex px-3 py-3 w-full items-center gap-3 text-gray-300 hover:text-white hover:bg-gray-600 last:rounded-b-xl" href="https://laraveldaily.com/code-examples">
    Code examples
</a>

                    <a class="flex px-3 py-3 w-full items-center gap-3 text-gray-300 hover:text-white hover:bg-gray-600 last:rounded-b-xl" href="https://laraveldaily.com/jobs/offers">
    Job offers
</a>

                    <a class="flex px-3 py-3 w-full items-center gap-3 text-gray-300 hover:text-white hover:bg-gray-600 last:rounded-b-xl" href="https://laraveldaily.com/premium-tools">
    Premium tools
</a>

                    <a class="flex px-3 py-3 w-full items-center gap-3 text-gray-300 hover:text-white hover:bg-gray-600 last:rounded-b-xl" href="https://laraveldaily.com/people-to-follow">
    People to Follow
</a>

                    <a class="flex px-3 py-3 w-full items-center gap-3 text-gray-300 hover:text-white hover:bg-gray-600 last:rounded-b-xl" href="https://laraveldaily.com/webinars">
    Webinars
</a>

                    <a class="flex px-3 py-3 w-full items-center gap-3 text-gray-300 hover:text-white hover:bg-gray-600 last:rounded-b-xl" href="https://laraveldaily.com/project-ideas">
    Project Ideas
</a>

                    <a class="flex px-3 py-3 w-full items-center gap-3 text-gray-300 hover:text-white hover:bg-gray-600 last:rounded-b-xl" href="https://laraveldaily.com/jobs/developer-profiles">
    Developer profiles
</a>
    </div>
</div>

            <li>
    <a class="text-gray-300 flex p-3 w-full items-center gap-3 hover:text-white hover:bg-gray-700 rounded-xl" href="https://us11.campaign-archive.com/home/?u=a459401212599a54203d036ee&amp;id=91c1337873" target="_blank">Newsletter</a>
</li>

            <li>
    <a class="text-gray-300 flex p-3 w-full items-center gap-3 hover:text-white hover:bg-gray-700 rounded-xl" href="https://laraveldaily.com/pricing">Pricing</a>
</li>

            <div class="h-px my-2 bg-gradient-to-r from-gray-800 via-primary-400 to-gray-800"></div>

            
            
            
                            
                <li>
    <a class="text-gray-300 flex p-3 w-full items-center gap-3 hover:text-white hover:bg-gray-700 rounded-xl" href="https://laraveldaily.com/account/courses"><svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"></path>
</svg>                    My courses</a>
</li>

                <li>
    <a class="text-gray-300 flex p-3 w-full items-center gap-3 hover:text-white hover:bg-gray-700 rounded-xl" href="https://laraveldaily.com/account/comments"><svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"></path>
</svg>                    My comments</a>
</li>

                <li>
    <a class="text-gray-300 flex p-3 w-full items-center gap-3 hover:text-white hover:bg-gray-700 rounded-xl" href="https://laraveldaily.com/billing"><svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v1H0V4zm0 3v5a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7H0zm3 2h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"></path>
</svg>                    My membership</a>
</li>

                <li>
    <a class="text-gray-300 flex p-3 w-full items-center gap-3 hover:text-white hover:bg-gray-700 rounded-xl" href="https://laraveldaily.com/account/overview"><svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M7.068.727c.243-.97 1.62-.97 1.864 0l.071.286a.96.96 0 0 0 1.622.434l.205-.211c.695-.719 1.888-.03 1.613.931l-.08.284a.96.96 0 0 0 1.187 1.187l.283-.081c.96-.275 1.65.918.931 1.613l-.211.205a.96.96 0 0 0 .434 1.622l.286.071c.97.243.97 1.62 0 1.864l-.286.071a.96.96 0 0 0-.434 1.622l.211.205c.719.695.03 1.888-.931 1.613l-.284-.08a.96.96 0 0 0-1.187 1.187l.081.283c.275.96-.918 1.65-1.613.931l-.205-.211a.96.96 0 0 0-1.622.434l-.071.286c-.243.97-1.62.97-1.864 0l-.071-.286a.96.96 0 0 0-1.622-.434l-.205.211c-.695.719-1.888.03-1.613-.931l.08-.284a.96.96 0 0 0-1.186-1.187l-.284.081c-.96.275-1.65-.918-.931-1.613l.211-.205a.96.96 0 0 0-.434-1.622l-.286-.071c-.97-.243-.97-1.62 0-1.864l.286-.071a.96.96 0 0 0 .434-1.622l-.211-.205c-.719-.695-.03-1.888.931-1.613l.284.08a.96.96 0 0 0 1.187-1.186l-.081-.284c-.275-.96.918-1.65 1.613-.931l.205.211a.96.96 0 0 0 1.622-.434l.071-.286zM12.973 8.5H8.25l-2.834 3.779A4.998 4.998 0 0 0 12.973 8.5zm0-1a4.998 4.998 0 0 0-7.557-3.779l2.834 3.78h4.723zM5.048 3.967c-.03.021-.058.043-.087.065l.087-.065zm-.431.355A4.984 4.984 0 0 0 3.002 8c0 1.455.622 2.765 1.615 3.678L7.375 8 4.617 4.322zm.344 7.646.087.065-.087-.065z"></path>
</svg>                    Account settings</a>
</li>

                <li>
    <a class="text-gray-300 flex p-3 w-full items-center gap-3 hover:text-white hover:bg-gray-700 rounded-xl" href="https://discord.gg/6y44kcX8tX"><svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"></path>
</svg>                    Discord</a>
</li>

                
                <form method="POST" action="https://laraveldaily.com/logout">
                    <input type="hidden" name="_token" value="7W86ZkmJCOG4YVVdPcGQ9Ly89FCOAbAZpcjS1AS9" autocomplete="off">
                    <li>
    <a class="text-gray-300 flex p-3 w-full items-center gap-3 hover:text-white hover:bg-gray-700 rounded-xl" href="https://laraveldaily.com/logout" onclick="event.preventDefault();this.closest(&#39;form&#39;).submit();"><svg class="w-5 h-5 text-primary-400" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"></path>
  <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"></path>
</svg>                        <span class="text-primary-400">Log out</span></a>
</li>
                </form>
            
            
            <li>
                <div class="my-3">
                    <label class="sr-only">
                        Search
                    </label>

                    <button type="button" @click="$dispatch(&#39;toggle-spotlight&#39;)" class="relative flex w-full text-left items-center">
                        <div class="py-3 pl-4 pr-12 text-sm transition bg-gray-700 hover:bg-gray-600 border-0 border-t border-b rounded-lg text-gray-400 grow border-t-gray-600 border-b-transparent">Search for anything: performance, services...</div>

                        <div class="absolute flex items-center justify-center w-8 h-8 text-white rounded-md shadow-lg right-2 shadow-primary-700/30 border-y border-t-primary-400 border-b-primary-800 bg-gradient-to-b from-primary-500 to-primary-600">
                            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path>
</svg>                        </div>
                    </button>
                </div>
            </li>
        </ul>
    </div>
</nav>
</header>

    <section class="relative py-16 -mt-20 overflow-hidden text-white bg-gray-800 grow">
        
        <div class="h-20"></div>

        <div class="container relative max-w-screen-2xl">
            <div class="flex flex-row gap-2 items-center">
                <a href="https://laraveldaily.com/courses" class="inline-flex items-center gap-2 font-medium text-primary-400">
                    <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"></path>
</svg>
                    <span>Courses</span>
                </a>
                <svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"></path>
</svg>                <h2 class="inline-flex items-center font-medium text-base tracking-tight">Re-creating Booking.com API with Laravel and PHPUnit</h2>
            </div>

            <div class="mt-4">
                <h1 class="text-3xl font-bold tracking-tight">
                    Roles/Permissions Structure: Owner/User
                </h1>
            </div>

            <nav class="flex flex-wrap items-center gap-4 mt-4">
                <div class="flex items-center gap-2">
                                            
                                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/profile-fields" class="inline-flex items-center justify-center w-8 h-8 text-gray-300 bg-gray-700 rounded-lg border-y border-b-transparent border-t-gray-600">
                                <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"></path>
</svg>                            </a>
                                            
                                            <div wire:id="culVWOYGRuuX2XSGzMzo">
    <button type="button" wire:click="toggleCompleted" wire:loading.attr="disabled" class="inline-flex items-center justify-center h-8 gap-2 px-2 text-sm font-medium text-gray-300 bg-gray-700 rounded-lg border-y border-b-transparent border-t-gray-600 disabled:opacity-75">
                    <span>Completed</span>

            <svg class="w-5 h-5 text-success-400" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"></path>
</svg>            </button>
</div>

<!-- Livewire Component wire-end:culVWOYGRuuX2XSGzMzo -->                                    </div>

                <p class="flex items-center gap-2 text-gray-300">
                    <span class="font-mono text-gray-400 tabular-nums">01/23</span>
                </p>

                            </nav>

            <div class="grid gap-8 mt-4 grid-cols-1 md:grid-cols-3">
                
                <div class="md:col-span-2">
                    
                    
                                            <article class="pt-8 mt-8 prose sm:prose-xl border-t border-gray-700 prose-invert max-w-none lesson--markdown"><p>Default Laravel comes with the "users" table, and we need to add roles and permissions on top of that one. And what I want to do here is describe my <strong>way of thinking</strong> about this, so you would understand the alternatives and be prepared to make the decisions for your applications.</p>
<p>Many tutorials start with roles and then go to permissions, but I will start from the other side: let's reverse-engineer what we need roles/permissions FOR.</p>
<hr>
<h2>Goals of This Lesson</h2>
<ul>
<li>Create our simple DB structure for roles/permissions</li>
<li>Create first API endpoints and PHPUnit Tests for registration</li>
<li>Simulate API endpoints for logged-in users and write tests to check permissions</li>
<li>Alternative: look at the spatie/laravel-permission package</li>
</ul>
<p>As a result of this lesson, we will launch the automated tests and see this result:</p>
<p><img src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/auth-test-permissions.png" alt="Auth Test Permissions"></p>
<hr>
<h2>Simple Permissions with Gates</h2>
<p>In our application, we will have features like:</p>
<ul>
<li>Manage properties</li>
<li>Make booking</li>
<li>Change the user's password</li>
<li>etc.</li>
</ul>
<p>Those are all <strong>permissions</strong>. Every user may or may not have permission for some action.</p>
<p>In Laravel's language, permissions are almost the same as <a href="https://laravel.com/docs/9.x/authorization#gates">Gates</a>.</p>
<p>So, technically speaking, <strong>simple applications may be created with just Users and Gates, without separate Roles/Permissions DB tables</strong>.</p>
<p>In a simple app, if you have just a <code>users.is_admin</code> DB column with 0/1 values, you can define:</p>
<p><strong>app/Providers/AppServiceProvider.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-0"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #FFCB8B;">Gate</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">define</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">manage-users</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$user</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$user</span><span style="color: #89DDFF;">-&gt;is_admin</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">==</span><span style="color: #BFC7D5;"> </span><span style="color: #F78C6C;">1</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div></code></pre><button id="clipButton-0" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>And then, wherever we have the permission check, instead of checking the role, you should check the permission every time:</p>
<p><strong>Blade files</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="blade" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-1"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">@can</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">manage-users</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">)</span></div><div class="line"><span style="color: #BFC7D5;">   Link to edit user's password</span></div><div class="line"><span style="color: #C792EA;">@endcan</span></div></code></pre><button id="clipButton-1" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>UserController.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-2"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">edit</span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$user</span><span style="color: #D9F5DD;">)</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">authorize</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">manage-users</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> Return the form to edit the user's password</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-2" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>But in our case, it's not just the admin. We will have <strong>three</strong> roles, at least:</p>
<ul>
<li>Administrator</li>
<li>Property owner</li>
<li>Simple User</li>
</ul>
<p>So, in our case, such Provider would look like this:</p>
<p><strong>app/Providers/AppServiceProvider.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-3"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #FFCB8B;">Gate</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">define</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">manage-properties</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$user</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$user</span><span style="color: #89DDFF;">-&gt;is_owner</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">==</span><span style="color: #BFC7D5;"> </span><span style="color: #F78C6C;">1</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div><div class="line"><span style="color: #FFCB8B;">Gate</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">define</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">book-property</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$user</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$user</span><span style="color: #89DDFF;">-&gt;is_user</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">==</span><span style="color: #BFC7D5;"> </span><span style="color: #F78C6C;">1</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div><div class="line"><span style="color: #FFCB8B;">Gate</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">define</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">manage-users</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$user</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$user</span><span style="color: #89DDFF;">-&gt;is_admin</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">==</span><span style="color: #BFC7D5;"> </span><span style="color: #F78C6C;">1</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #697098;">//</span><span style="color: #697098;"> ... more permissions</span></div></code></pre><button id="clipButton-3" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-3"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Those <code>$user-&gt;is_xxxxx</code> are not that pretty, are they? With dozens of permissions, the provider file would look huge and ugly. So, we DO need to have roles and permissions separately in the database.</p>
<hr>
<h2>Roles and Permissions in the DB</h2>
<p>Instead of those <code>is_owner</code> and <code>is_admin</code> potential columns in the DB, let's create Roles with a relationship.</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-4"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">make:model</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">Role</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">-ms</span></div></code></pre><button id="clipButton-4" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>Migration</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-5"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #FFCB8B;">Schema</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">roles</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Blueprint</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$table</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$table</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">id</span><span style="color: #BFC7D5;">();</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$table</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">string</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$table</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">timestamps</span><span style="color: #BFC7D5;">();</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div></code></pre><button id="clipButton-5" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-5"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Make the <code>name</code> fillable:</p>
<p><strong>app/Models/Role.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-6"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">Role</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Model</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">protected</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$fillable</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> [</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">];</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-6" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-6"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>And then immediately I would suggest adding a <strong>Seeder</strong> to seed the main roles for the beginning. You noticed that I generated <code>make:model</code> with <code>-s</code> at the end. So yeah, it generated the Seeder file, which we will in like this:</p>
<p><strong>database/seeders/RoleSeeder.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-7"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">Role</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">RoleSeeder</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Seeder</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">run</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">([</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Administrator</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">]);</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">([</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Property Owner</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">]);</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">([</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Simple User</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">]);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-7" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-7"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Next, each role will have multiple Permissions. So let's store them in the database, too. The DB structure is identical to the Role:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-8"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">make:model</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">Permission</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">-m</span></div></code></pre><button id="clipButton-8" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-8"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>Migration</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-9"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #FFCB8B;">Schema</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">permissions</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Blueprint</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$table</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$table</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">id</span><span style="color: #BFC7D5;">();</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$table</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">string</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$table</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">timestamps</span><span style="color: #BFC7D5;">();</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div></code></pre><button id="clipButton-9" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-9"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>app/Models/Permission.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-10"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">Permission</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Model</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">protected</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$fillable</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> [</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">];</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-10" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-10"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Now, the relationship. It should be a many-to-many, because both each role may have many permissions, and also each permission may belong to many roles.</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-11"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">make:migration</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">create_permission_role_table</span></div></code></pre><button id="clipButton-11" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-11"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>Migration</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-12"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #FFCB8B;">Schema</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">permission_role</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Blueprint</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$table</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$table</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">foreignId</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">permission_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">constrained</span><span style="color: #BFC7D5;">();</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$table</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">foreignId</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">role_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">constrained</span><span style="color: #BFC7D5;">();</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div></code></pre><button id="clipButton-12" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-12"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>And we add the methods for relationships, in both Models:</p>
<p><strong>app/Models/Role.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-13"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">Role</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Model</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">permissions</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">belongsToMany</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">Permission</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-13" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-13"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>app/Models/Permission.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-14"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">Permission</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Model</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">roles</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">belongsToMany</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-14" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-14"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Ok, great, we have the relationship between roles and permissions. Now, how do we assign roles or permissions to Users?</p>
<hr>
<h2>User: One Role or Multiple Roles?</h2>
<p>Typically, there are two layers of managing permissions:</p>
<ul>
<li>Admin adds the permissions and then specifies which roles have certain permissions</li>
<li>For users, the admin/system assigns the ROLES to them, which in itself includes the permissions</li>
</ul>
<p>In other words, we don't assign permissions to the users, we assign only the roles.</p>
<p>So, we need to create the relationship from User to Role. And here's where we have a million-dollar question:</p>
<p><strong>Should User-Role be a belongsTo or a belongsToMany?</strong></p>
<p>This, of course, depends on your application needs. To rephrase, "can a user have multiple roles"?</p>
<p>I've seen applications that allow multiple roles, like the same person can be an editor and an administrator, but it makes the system so much more complex, and even confusing.</p>
<p>So, I would vote that, in most cases, you would first choose a more simple approach of one role per user.</p>
<p>I've checked Booking.com itself, and they require <strong>separate</strong> registrations as a user and as a property owner, so you can be either one or another.</p>
<p>That's why we will go for just a <code>belongsTo</code> relationship here.</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-15"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">make:migration</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">add_role_id_to_users_table</span></div></code></pre><button id="clipButton-15" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-15"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>Migration</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-16"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #FFCB8B;">Schema</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">table</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">users</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Blueprint</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$table</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$table</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">foreignId</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">role_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">constrained</span><span style="color: #BFC7D5;">();</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div></code></pre><button id="clipButton-16" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-16"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Then we add that <code>role_id</code> to the <code>$fillable</code> and define the relationship:</p>
<p><strong>app/Models/User.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-17"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">User</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Authenticatable</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">protected</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$fillable</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> [</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">email</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">password</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">role_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">    ];</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">role</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">belongsTo</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-17" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-17"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>So, at the moment of the registration, our new users will choose whether they are looking for a property to rent, or want to publish their own property for rent.</p>
<p>As for the Administrator, I suggest creating a special Seeder to already have one Administrator in the DB after the project install:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-18"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">make:seeder</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">AdminUserSeeder</span></div></code></pre><button id="clipButton-18" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-18"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>database/seeders/AdminUserSeeder.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-19"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">AdminUserSeeder</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Seeder</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">run</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">([</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Administrator</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">email</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">superadmin@booking.com</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">password</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">bcrypt</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">SuperSecretPassword</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">),</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">email_verified_at</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">now</span><span style="color: #BFC7D5;">(),</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">role_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #F78C6C;">1</span><span style="color: #BFC7D5;">, </span><span style="color: #697098;">//</span><span style="color: #697098;"> Administrator</span></div><div class="line"><span style="color: #BFC7D5;">        ]);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-19" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-19"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Then, we add both seeders to the main <code>DatabaseSeeder</code>.</p>
<p><strong>database/seeders/DatabaseSeeder.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-20"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">DatabaseSeeder</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Seeder</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">run</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">call</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">RoleSeeder</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">call</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">AdminUserSeeder</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-20" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-20"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>And, finally, we can launch the migrations with seeds:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-21"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">migrate</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">--seed</span></div></code></pre><button id="clipButton-21" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-21"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><img src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/first-migrate-seed.png" alt="First migrate seed"></p>
<p>Our next goal is to implement the registration API and test that users get their roles correctly.</p>
<hr>
<h2>Registration API: Assign Permissions and Test Them</h2>
<p>Let's say that we will have two registration forms: one for a simple user, and another for the property owner. So, let's simulate both of them and write automated tests that would check if users get the correct role/permissions.</p>
<p>For now, let's group them into one endpoint <code>POST /api/auth/register</code>, because the user registration would be almost identical. In future lessons, we will talk about differences in the profile fields, but both users and property owners are Users with the same fields of name/email/password.</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-22"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">make:controller</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">Auth/RegisterController</span></div></code></pre><button id="clipButton-22" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-22"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>routes/api.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-23"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">post</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">auth/register</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, App\Http\Controllers\Auth\</span><span style="color: #FFCB8B;">RegisterController</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">);</span></div></code></pre><button id="clipButton-23" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-23"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>We will create only one method and use the Controller as <a href="https://laravel.com/docs/9.x/controllers#single-action-controllers">Invokable Single-Action Controller</a>.</p>
<p><strong>app/Http/Controllers/Auth/RegisterController.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-24"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">namespace</span><span style="color: #BFC7D5;"> App\Http\Controllers\Auth;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Http\Controllers\</span><span style="color: #FFCB8B;">Controller</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Http\</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\Facades\</span><span style="color: #FFCB8B;">Hash</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Validation\Rules\</span><span style="color: #FFCB8B;">Password</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">RegisterController</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Controller</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">__invoke</span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #D9F5DD;">)</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">validate</span><span style="color: #BFC7D5;">([</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">required</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">string</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">max:255</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">],</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">email</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">required</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">string</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">email</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">max:255</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">unique:users</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">],</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">password</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">required</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">confirmed</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #FFCB8B;">Password</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">defaults</span><span style="color: #BFC7D5;">()],</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">role_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">required</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #FFCB8B;">Rule</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">in</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">2</span><span style="color: #BFC7D5;">, </span><span style="color: #F78C6C;">3</span><span style="color: #BFC7D5;">)],</span></div><div class="line"><span style="color: #BFC7D5;">        ]);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$user</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">([</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;name</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">email</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;email</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">password</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Hash</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">make</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;password</span><span style="color: #BFC7D5;">),</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">role_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;role_id</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">        ]);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">response</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">json</span><span style="color: #BFC7D5;">([</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">access_token</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$user</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">createToken</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">client</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;plainTextToken</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">        ]);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-24" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-24"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Here I'm assuming we use Laravel Sanctum for the Auth, so we just return the access token, as for mobile application, and all the subsequent requests would happen with that as a Bearer Token, for the authentication. If you don't know how that works, check out my course <a href="https://laraveldaily.com/course/build-laravel-api-step-by-step">Build Laravel API for Car Parking App: Step-By-Step</a>.</p>
<p>So, after the validation, we can create the User with <code>role_id =&gt; 3</code>, which is the Simple User, according to our Seeder above.</p>
<p>In the validation, we have that <code>Rule::in(2, 3)</code> hardcoded. You would probably agree that this <code>2, 3</code> isn't readable or understandable at the first glance to a new developer, as it's hard to remember which role is ID 2 or 3. Let's introduce a few constants inside a Role model.</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-25"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">Role</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Model</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">const</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">ROLE_ADMINISTRATOR</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #F78C6C;">1</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">const</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">ROLE_OWNER</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #F78C6C;">2</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">const</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">ROLE_USER</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #F78C6C;">3</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-25" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-25"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Then, in Controller, we can do this:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-26"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">Role</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">RegisterController</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Controller</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">__invoke</span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #D9F5DD;">)</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">validate</span><span style="color: #BFC7D5;">([</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">role_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">required</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #FFCB8B;">Rule</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">in</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_OWNER</span><span style="color: #BFC7D5;">, </span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_USER</span><span style="color: #BFC7D5;">)],</span></div><div class="line"><span style="color: #BFC7D5;">        ]);</span></div></code></pre><button id="clipButton-26" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-26"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>More readable, isn't it? You could also create a separate <a href="https://php.watch/versions/8.1/enums">Enum Class</a> for this, but for simplicity, I decided to create those constants in the Model. It's a totally personal preference.</p>
<p>Ok, so we have the user's registration endpoint. Here's how it works in the Postman API client:</p>
<p><img src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/auth-register-postman.png" alt=""></p>
<p>Let's test how it works, by building <strong>automated test</strong>.</p>
<p>Let's prepare our test suite first.</p>
<p>In the default Laravel project, I typically delete two example test files</p>
<ul>
<li>tests/Feature/ExampleTest.php</li>
<li>tests/Unit/ExampleTest.php</li>
</ul>
<p>Also, I edit the default <code>phpunit.xml</code> file to uncomment these two lines:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="text" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-27"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">&lt;env name="DB_CONNECTION" value="sqlite"/&gt;</span></div><div class="line"><span style="color: #BFC7D5;">&lt;env name="DB_DATABASE" value=":memory:"/&gt;</span></div></code></pre><button id="clipButton-27" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-27"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>Notice</strong>: For demo projects like this one, it's typically fine to use an in-memory database, but in the real-world scenario I often set up a separate testing MySQL database to run tests on.</p>
<p>Ok, and now, let's generate our first test that would check if the registration works.</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-28"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">make:test</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">AuthTest</span></div></code></pre><button id="clipButton-28" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-28"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>tests/Feature/AuthTest.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-29"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">namespace</span><span style="color: #BFC7D5;"> Tests\Feature;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">Role</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Foundation\Testing\</span><span style="color: #FFCB8B;">RefreshDatabase</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Tests\</span><span style="color: #FFCB8B;">TestCase</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">AuthTest</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">TestCase</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">RefreshDatabase</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">test_registration_fails_with_admin_role</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">postJson</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">/api/auth/register</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, [</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Valid name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">email</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">valid@email.com</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">password</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">ValidPassword</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">password_confirmation</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">ValidPassword</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">role_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_ADMINISTRATOR</span></div><div class="line"><span style="color: #BFC7D5;">        ]);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">422</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">test_registration_succeeds_with_owner_role</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">postJson</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">/api/auth/register</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, [</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Valid name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">email</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">valid@email.com</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">password</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">ValidPassword</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">password_confirmation</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">ValidPassword</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">role_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_OWNER</span></div><div class="line"><span style="color: #BFC7D5;">        ]);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">200</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertJsonStructure</span><span style="color: #BFC7D5;">([</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">access_token</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">        ]);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">test_registration_succeeds_with_user_role</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">postJson</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">/api/auth/register</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, [</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Valid name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">email</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">valid@email.com</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">password</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">ValidPassword</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">password_confirmation</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">ValidPassword</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">role_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_USER</span></div><div class="line"><span style="color: #BFC7D5;">        ]);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">200</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertJsonStructure</span><span style="color: #BFC7D5;">([</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">access_token</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">        ]);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-29" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-29"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>As you can see, we have three methods, each of which tests the registration with each of the roles. By the way, see how constants like <code>Role::ROLE_OWNER</code> paid off here as well, the test code is really readable.</p>
<p>The result: our registration works!</p>
<p><img src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/auth-test-registration.png" alt="Auth Test Registration"></p>
<hr>
<p>Finally, in this lesson, let's create a few endpoints for the <strong>logged-in users</strong> and test if we have the correct access to them.</p>
<p>Let's say that our property owner will have access to the list of their properties, and the regular user will have access to their bookings.</p>
<p>So we will create those endpoints, without any functionality for now, just with the <code>Gates</code> to check the permissions.</p>
<p>Let's add those permissions as a seeder, and group them for more permissions in the future.</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-30"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">make:seeder</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">PermissionSeeder</span></div></code></pre><button id="clipButton-30" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-30"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>database/seeders/PermissionSeeder.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-31"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">namespace</span><span style="color: #BFC7D5;"> Database\Seeders;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">Permission</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">Role</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Database\Console\Seeds\</span><span style="color: #FFCB8B;">WithoutModelEvents</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Database\</span><span style="color: #FFCB8B;">Seeder</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">PermissionSeeder</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Seeder</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">/**</span></div><div class="line"><span style="color: #697098;">     * Run the database seeds.</span></div><div class="line"><span style="color: #697098;">     *</span></div><div class="line"><span style="color: #697098;">     * </span><span style="color: #C792EA;">@return</span><span style="color: #697098;"> </span><span style="color: #C792EA;">void</span></div><div class="line"><span style="color: #697098;">     </span><span style="color: #697098;">*/</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">run</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$allRoles</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">all</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">keyBy</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$permissions</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> [</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">properties-manage</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_OWNER</span><span style="color: #BFC7D5;">],</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">bookings-manage</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_USER</span><span style="color: #BFC7D5;">],</span></div><div class="line"><span style="color: #BFC7D5;">        ];</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">foreach</span><span style="color: #BFC7D5;"> (</span><span style="color: #BEC5D4;">$permissions</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">as</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$key</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$roles</span><span style="color: #BFC7D5;">) {</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #BEC5D4;">$permission</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Permission</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">([</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$key</span><span style="color: #BFC7D5;">]);</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #C792EA;">foreach</span><span style="color: #BFC7D5;"> (</span><span style="color: #BEC5D4;">$roles</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">as</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$role</span><span style="color: #BFC7D5;">) {</span></div><div class="line"><span style="color: #BFC7D5;">                </span><span style="color: #BEC5D4;">$allRoles</span><span style="color: #BFC7D5;">[</span><span style="color: #BEC5D4;">$role</span><span style="color: #BFC7D5;">]</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">permissions</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">attach</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$permission</span><span style="color: #89DDFF;">-&gt;id</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">            }</span></div><div class="line"><span style="color: #BFC7D5;">        }</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-31" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-31"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Now, as we have all the other data in the DB already, we can run this single seeder:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-32"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">db:seed</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">--class=PermissionSeeder</span></div></code></pre><button id="clipButton-32" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-32"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>And now let's use those permissions on the actual routes.</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-33"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">make:controller</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">Owner/PropertyController</span></div><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">make:controller</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">User/BookingController</span></div></code></pre><button id="clipButton-33" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-33"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>routes/api.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-34"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">post</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">auth/register</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, \App\Http\Controllers\Auth\</span><span style="color: #FFCB8B;">RegisterController</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">middleware</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">auth:sanctum</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">group</span><span style="color: #BFC7D5;">(</span><span style="color: #C792EA;">function</span><span style="color: #D9F5DD;">()</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> No owner/user grouping, for now, will do it later with more routes</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">owner/properties</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">        [\App\Http\Controllers\Owner\</span><span style="color: #FFCB8B;">PropertyController</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">index</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">]);</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">user/bookings</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">        [\App\Http\Controllers\User\</span><span style="color: #FFCB8B;">BookingController</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">index</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">]);</span></div><div class="line"><span style="color: #BFC7D5;">});</span></div></code></pre><button id="clipButton-34" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-34"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>And then let's use our Gates in the Controllers:</p>
<p><strong>app/Http/Controllers/Owner/PropertyController.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-35"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">namespace</span><span style="color: #BFC7D5;"> App\Http\Controllers\Owner;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Http\Controllers\</span><span style="color: #FFCB8B;">Controller</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">PropertyController</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Controller</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">index</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">authorize</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">properties-manage</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #697098;">//</span><span style="color: #697098;"> Will implement property management later</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">response</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">json</span><span style="color: #BFC7D5;">([</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">success</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">true</span><span style="color: #BFC7D5;">]);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-35" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-35"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>app/Http/Controllers/User/BookingController.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-36"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">namespace</span><span style="color: #BFC7D5;"> App\Http\Controllers\User;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Http\Controllers\</span><span style="color: #FFCB8B;">Controller</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Http\</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">BookingController</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Controller</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">index</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">authorize</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">bookings-manage</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #697098;">//</span><span style="color: #697098;"> Will implement booking management later</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">response</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">json</span><span style="color: #BFC7D5;">([</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">success</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">true</span><span style="color: #BFC7D5;">]);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-36" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-36"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Now, for <code>$this-&gt;authorize()</code> to work, we need to actually <strong>define</strong> the Gates for the application. Currently, the permissions are in our database, but depending on the current user's role, we need to set every Gate to a true/false value for the user.</p>
<p>We will generate a Middleware specifically for that and enable that Middleware to run on every API request.</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-37"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">make:middleware</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">GateDefineMiddleware</span></div></code></pre><button id="clipButton-37" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-37"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>app/Http/Middleware/GateDefineMiddleware.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-38"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">namespace</span><span style="color: #BFC7D5;"> App\Http\Middleware;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">Permission</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Closure</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Http\</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\Facades\</span><span style="color: #FFCB8B;">Gate</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">GateDefineMiddleware</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">handle</span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #BFC7D5;">, </span><span style="color: #FFCB8B;">Closure</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$next</span><span style="color: #D9F5DD;">)</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">if</span><span style="color: #BFC7D5;"> (</span><span style="color: #82AAFF;">auth</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">check</span><span style="color: #BFC7D5;">()) {</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #BEC5D4;">$permissions</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Permission</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">whereHas</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">roles</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #D9F5DD;">(</span><span style="color: #BEC5D4;">$query</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class="line"><span style="color: #BFC7D5;">                </span><span style="color: #BEC5D4;">$query</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">where</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">roles.id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">, </span><span style="color: #82AAFF;">auth</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">user</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;role_id</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">            })</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">();</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #C792EA;">foreach</span><span style="color: #BFC7D5;"> (</span><span style="color: #BEC5D4;">$permissions</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">as</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$permission</span><span style="color: #BFC7D5;">) {</span></div><div class="line"><span style="color: #BFC7D5;">                </span><span style="color: #FFCB8B;">Gate</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">define</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$permission</span><span style="color: #89DDFF;">-&gt;name</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">fn</span><span style="color: #D9F5DD;">()</span><span style="color: #BFC7D5;"> =&gt; </span><span style="color: #82AAFF;">true</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">            }</span></div><div class="line"><span style="color: #BFC7D5;">        }</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$next</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$request</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-38" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-38"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>As you can see, we launch <code>Gate::define()</code> only on those permissions that are assigned to the <code>role_id</code> of the logged-in user. For other permissions, the Gate will not be defined, so it will return <code>false</code> when checking for that permission.</p>
<p>We register our middleware to run in the <code>api</code> group.</p>
<p><strong>app/Http/Kernel.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-39"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Http\Middleware\</span><span style="color: #FFCB8B;">GateDefineMiddleware</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">Kernel</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">HttpKernel</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">protected</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$middlewareGroups</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> [</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">web</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class="line"><span style="color: #BFC7D5;">        ],</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">api</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #697098;">//</span><span style="color: #697098;"> \Laravel\Sanctum\Http\Middleware\EnsureFrontendRequestsAreStateful::class,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">throttle:api</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            \Illuminate\Routing\Middleware\</span><span style="color: #FFCB8B;">SubstituteBindings</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #FFCB8B;">GateDefineMiddleware</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">        ],</span></div><div class="line"><span style="color: #BFC7D5;">    ];</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-39" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-39"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Now, all we need to do to check if the middleware is working is to launch the API endpoints for the user and the property owner separately, with the Bearer Token that we received from the registration endpoint.</p>
<p>Here's how it looks in Postman:</p>
<p><img src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/auth-access-postman.png" alt=""></p>
<p>And when access is denied:</p>
<p><img src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/auth-access-denied-postman" alt=""></p>
<p>Now, automated tests should cover those cases, too. So let's generate one.</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-40"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">make:test</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">PropertiesTest</span></div></code></pre><button id="clipButton-40" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-40"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>tests/Feature/PropertiesTest.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-41"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">namespace</span><span style="color: #BFC7D5;"> Tests\Feature;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">Role</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Foundation\Testing\</span><span style="color: #FFCB8B;">RefreshDatabase</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Tests\</span><span style="color: #FFCB8B;">TestCase</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">PropertiesTest</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">TestCase</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">RefreshDatabase</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">test_property_owner_has_access_to_properties_feature</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$owner</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">factory</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">([</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">role_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_OWNER</span><span style="color: #BFC7D5;">]);</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">actingAs</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$owner</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">getJson</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">/api/owner/properties</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">200</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">test_user_does_not_have_access_to_properties_feature</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$owner</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">factory</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">([</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">role_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_USER</span><span style="color: #BFC7D5;">]);</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">actingAs</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$owner</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">getJson</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">/api/owner/properties</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">403</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-41" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-41"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>At this point, we don't care what that <code>/api/owner/properties</code> returns inside, we care if it's successful (code 200) or forbidden (code 403).</p>
<p>To make this work, we need to make a change in the base TestCase to run the <strong>seeds</strong> for the roles/permissions, for our tests. Cause the default <code>RefreshDatabase</code> will just run the migrations, but not the data seeds.</p>
<p><strong>tests/TestCase.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-42"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">abstract</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">TestCase</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">BaseTestCase</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">CreatesApplication</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">setUp</span><span style="color: #D9F5DD;">()</span><span style="color: #89DDFF;">:</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">void</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">parent</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">setUp</span><span style="color: #BFC7D5;">();</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">seed</span><span style="color: #BFC7D5;">(); </span><span style="color: #697098;">//</span><span style="color: #697098;"> THIS IS THE LINE WE NEED</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-42" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-42"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Also, in the same fashion, let's generate the identical test to check for the bookings list permissions as a simple user.</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-43"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">make:test</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">BookingsTest</span></div></code></pre><button id="clipButton-43" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-43"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>tests/Feature/BookingsTest.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-44"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">namespace</span><span style="color: #BFC7D5;"> Tests\Feature;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">Role</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Foundation\Testing\</span><span style="color: #FFCB8B;">RefreshDatabase</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Tests\</span><span style="color: #FFCB8B;">TestCase</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">BookingsTest</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">TestCase</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">RefreshDatabase</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">test_user_has_access_to_bookings_feature</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$owner</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">factory</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">([</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">role_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_USER</span><span style="color: #BFC7D5;">]);</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">actingAs</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$owner</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">getJson</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">/api/user/bookings</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">200</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">test_property_owner_does_not_have_access_to_bookings_feature</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$owner</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">factory</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">([</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">role_id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_OWNER</span><span style="color: #BFC7D5;">]);</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">actingAs</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$owner</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">getJson</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">/api/user/bookings</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">403</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-44" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-44"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Now, we launch <code>php artisan test</code>, and...</p>
<p><img src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/auth-test-permissions.png" alt="Auth Test Permissions"></p>
<p>We successfully simulated the registration for two user roles and their permissions for specific API endpoints!</p>
<hr>
<h2>Alternative: Spatie Permission Package</h2>
<p>There's another popular approach to adding roles/permissions to Laravel projects: package <a href="https://github.com/spatie/laravel-permission">spatie/laravel-permission</a>.</p>
<p>It would replace our own DB structure, and instead of manually attaching/detaching permissions, we will work with the package functions like <code>$user-&gt;assignRole('Administrator')</code> and similar ones.</p>
<p>I've tried it on the same project and committed the code to a <a href="https://github.com/LaravelDaily/Booking-Com-Simulation-Laravel/commit/52974438c53334b5c1ee8b57e2ac08da4025365f">separate branch in the repository</a>, let's review the differences and changes I've made.</p>
<p>First, we install the package and publish its assets.</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="sh" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-45"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">composer </span><span style="color: #BFC7D5;">require</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">spatie/laravel-permission</span></div><div class="line"><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">vendor:publish</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">--provider=</span><span style="color: #D9F5DD;">"</span><span style="color: #C3E88D;">Spatie\Permission\PermissionServiceProvider</span><span style="color: #D9F5DD;">"</span></div></code></pre><button id="clipButton-45" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-45"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Then, before we run the migrations, we need to remove our own ones. We don't need our own DB structure for roles/permissions, as the package will have their own migrations for this.</p>
<p>So we delete the migrations for:</p>
<ul>
<li>migration for <code>roles</code>
</li>
<li>migration for <code>permissions</code>
</li>
<li>migration for pivot <code>permission_role</code> table</li>
<li>column <code>role_id</code> from <code>users</code> migrations</li>
</ul>
<p>Then we run <code>php artisan migrate</code> to get the package tables into our DB.</p>
<p>Next, the Models. Again, we don't need our own models, because the package has its own <code>Role</code> and <code>Permission</code> models, with the same field "name" in the structure.</p>
<p>So, we delete the <code>App\Models\Permission.php</code> file.</p>
<p>With the Role model, it's a bit more tricky, because we've added an extra feature: the constants like <code>Role::ROLE_OWNER</code> which we use all over our project.</p>
<p>So we leave the Role model inside our project, just instead of extending the Model from Eloquent, we extend the Spatie package Role model.</p>
<p><strong>app/Models/Role.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-46"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">namespace</span><span style="color: #BFC7D5;"> App\Models;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">Role</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> \Spatie\Permission\Models\</span><span style="color: #A9C77D;">Role</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">HasFactory</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">const</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">ROLE_ADMINISTRATOR</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #F78C6C;">1</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">const</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">ROLE_OWNER</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #F78C6C;">2</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">const</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">ROLE_USER</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #F78C6C;">3</span><span style="color: #BFC7D5;">;</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-46" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-46"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Finally, we need to add a Trait in the User model:</p>
<p><strong>app/Models/User.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-47"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Spatie\Permission\Traits\</span><span style="color: #FFCB8B;">HasRoles</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">User</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Authenticatable</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">HasApiTokens</span><span style="color: #BFC7D5;">, </span><span style="color: #FFCB8B;">HasFactory</span><span style="color: #BFC7D5;">, </span><span style="color: #FFCB8B;">Notifiable</span><span style="color: #BFC7D5;">, </span><span style="color: #FFCB8B;">HasRoles</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div></code></pre><button id="clipButton-47" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-47"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Next, the Seeds. They will look a bit different, cause we need to switch from our own DB structure to use the package's features. Only the <code>RoleSeeder</code> doesn't change at all, the other ones will look like this.</p>
<p><strong>database/seeders/AdminUserSeeder.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-48"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">run</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$user</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">([</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Administrator</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">email</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">superadmin@booking.com</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">password</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">bcrypt</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">SuperSecretPassword</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">),</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">email_verified_at</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">now</span><span style="color: #BFC7D5;">(),</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #697098;">//</span><span style="color: #697098;"> no more role_id here</span></div><div class="line"><span style="color: #BFC7D5;">        ]);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$user</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assignRole</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">Administrator</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-48" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-48"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>database/seeders/PermissionSeeder.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-49"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Spatie\Permission\Models\</span><span style="color: #FFCB8B;">Permission</span><span style="color: #BFC7D5;">;</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #697098;">//</span><span style="color: #697098;"> We change only two lines:</span></div><div class="line"><span style="color: #697098;">//</span><span style="color: #697098;"> - Permission model from the package</span></div><div class="line"><span style="color: #697098;">//</span><span style="color: #697098;"> - attach() to givePermissionTo()</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">PermissionSeeder</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Seeder</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">run</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$allRoles</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">all</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">keyBy</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">id</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$permissions</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> [</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">properties-manage</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_OWNER</span><span style="color: #BFC7D5;">],</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">bookings-manage</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_USER</span><span style="color: #BFC7D5;">],</span></div><div class="line"><span style="color: #BFC7D5;">        ];</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">foreach</span><span style="color: #BFC7D5;"> (</span><span style="color: #BEC5D4;">$permissions</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">as</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$key</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$roles</span><span style="color: #BFC7D5;">) {</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #BEC5D4;">$permission</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Permission</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">([</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$key</span><span style="color: #BFC7D5;">]);</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #C792EA;">foreach</span><span style="color: #BFC7D5;"> (</span><span style="color: #BEC5D4;">$roles</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">as</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$role</span><span style="color: #BFC7D5;">) {</span></div><div class="line"><span style="color: #BFC7D5;">                </span><span style="color: #BEC5D4;">$allRoles</span><span style="color: #BFC7D5;">[</span><span style="color: #BEC5D4;">$role</span><span style="color: #BFC7D5;">]</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">givePermissionTo</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$permission</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">            }</span></div><div class="line"><span style="color: #BFC7D5;">        }</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-49" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-49"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Similarly, in the Registration Controller, we need to change assigning <code>role_id</code> to the <code>$user-&gt;assignRole()</code>.</p>
<p><strong>app/Http/Controllers/Auth/RegisterController.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-50"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">RegisterController</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Controller</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">__invoke</span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #D9F5DD;">)</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$user</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">([</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">name</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;name</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">email</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;email</span><span style="color: #BFC7D5;">,</span></div><div class="line"><span style="color: #BFC7D5;">            </span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">password</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Hash</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">make</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;password</span><span style="color: #BFC7D5;">),</span></div><div class="line"><span style="color: #BFC7D5;">        ]);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$user</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assignRole</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;role_id</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-50" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-50"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Next, we don't need our own Middleware, the <code>Gate::define()</code> things will be taken over by the package.</p>
<ul>
<li>Delete the file <code>GateDefineMiddleware</code>
</li>
<li>Remove its mention from <code>app/Http/Kernel.php</code>
</li>
</ul>
<p>Finally, we change our Tests to use the package feature of <code>assignRole()</code>.</p>
<p><strong>tests/Feature/BookingsTest.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-51"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">BookingsTest</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">TestCase</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">test_user_has_access_to_bookings_feature</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$user</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">factory</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assignRole</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_USER</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">actingAs</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$user</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">getJson</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">/api/user/bookings</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">200</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">test_property_owner_does_not_have_access_to_bookings_feature</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$owner</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">factory</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assignRole</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_OWNER</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">actingAs</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$owner</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">getJson</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">/api/user/bookings</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">403</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-51" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-51"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p><strong>tests/Feature/PropertiesTest.php</strong>:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="php" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-52"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">PropertiesTest</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">TestCase</span></div><div class="line"><span style="color: #BFC7D5;">{</span></div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">test_property_owner_has_access_to_properties_feature</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$owner</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">factory</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assignRole</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_OWNER</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">actingAs</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$owner</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">getJson</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">/api/owner/properties</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">200</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">test_user_does_not_have_access_to_properties_feature</span><span style="color: #D9F5DD;">()</span></div><div class="line"><span style="color: #BFC7D5;">    {</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$user</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">factory</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assignRole</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">Role</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ROLE_USER</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">actingAs</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$user</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">getJson</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">'</span><span style="color: #C3E88D;">/api/owner/properties</span><span style="color: #D9F5DD;">'</span><span style="color: #BFC7D5;">);</span></div><div class="line">&nbsp;</div><div class="line"><span style="color: #BFC7D5;">        </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">403</span><span style="color: #BFC7D5;">);</span></div><div class="line"><span style="color: #BFC7D5;">    }</span></div><div class="line"><span style="color: #BFC7D5;">}</span></div></code></pre><button id="clipButton-52" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-52"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>And if we relaunch <code>php artisan test</code>, the test should all pass!</p>
<p>Notice that we haven't changed anything in the Owner/User Controllers. It's all still the same: <code>$this-&gt;authorize('properties-manage');</code> and <code>$this-&gt;authorize('bookings-manage');</code>.</p>
<p>That's because Spatie uses the same Gate mechanism as we did before using the package, it just adds its own DB layer on top.</p>
<p>The main difference, however, is the database structure and the queries executed. In the Spatie package case, it's trying to be very flexible, using polymorphic relations and allowing users to have multiple roles (<em>which we don't need, as discussed earlier</em>).</p>
<p>Also, the package is running queries in "live mode" when checking the permissions. In our case, we're running the DB query only once in the Middleware, and then comparing the Gates whenever we need to check them.</p>
<p>Typical DB query without Spatie package - get all permissions by role:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="text" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-53"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">select</span></div><div class="line"><span style="color: #BFC7D5;">  *</span></div><div class="line"><span style="color: #BFC7D5;">from</span></div><div class="line"><span style="color: #BFC7D5;">  "permissions"</span></div><div class="line"><span style="color: #BFC7D5;">where</span></div><div class="line"><span style="color: #BFC7D5;">  exists (</span></div><div class="line"><span style="color: #BFC7D5;">    select</span></div><div class="line"><span style="color: #BFC7D5;">      *</span></div><div class="line"><span style="color: #BFC7D5;">    from</span></div><div class="line"><span style="color: #BFC7D5;">      "roles"</span></div><div class="line"><span style="color: #BFC7D5;">      inner join "permission_role" on "roles"."id" = "permission_role"."role_id"</span></div><div class="line"><span style="color: #BFC7D5;">    where</span></div><div class="line"><span style="color: #BFC7D5;">      "permissions"."id" = "permission_role"."permission_id"</span></div><div class="line"><span style="color: #BFC7D5;">      and "id" = 3</span></div><div class="line"><span style="color: #BFC7D5;">  )</span></div></code></pre><button id="clipButton-53" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-53"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>A typical query of the Spatie package - get all permissions by user:</p>
<div class="relative code-block-wrapper"><pre><code data-theme="olaolu-palenight" data-lang="text" class="torchlight" style="background-color: #292D3E; --theme-selection-background: #7580B850;" id="clipText-54"><!-- Syntax highlighted by torchlight.dev --><div class="line"><span style="color: #BFC7D5;">select</span></div><div class="line"><span style="color: #BFC7D5;">  "permissions".*,</span></div><div class="line"><span style="color: #BFC7D5;">  "model_has_permissions"."model_id" as "pivot_model_id",</span></div><div class="line"><span style="color: #BFC7D5;">  "model_has_permissions"."permission_id" as "pivot_permission_id",</span></div><div class="line"><span style="color: #BFC7D5;">  "model_has_permissions"."model_type" as "pivot_model_type"</span></div><div class="line"><span style="color: #BFC7D5;">from</span></div><div class="line"><span style="color: #BFC7D5;">  "permissions"</span></div><div class="line"><span style="color: #BFC7D5;">  inner join "model_has_permissions" on "permissions"."id" = "model_has_permissions"."permission_id"</span></div><div class="line"><span style="color: #BFC7D5;">where</span></div><div class="line"><span style="color: #BFC7D5;">  "model_has_permissions"."model_id" = 2</span></div><div class="line"><span style="color: #BFC7D5;">  and "model_has_permissions"."model_type" = 'App\Models\User'</span></div></code></pre><button id="clipButton-54" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-54"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>So, it's your personal preference whether to use the package or not. I've just shown it to you as an alternative.</p>
<p>I would vote for it in the case when you do need users to have many roles, as it is supported in the package by default.</p>
<p>Again, the code is <a href="https://github.com/LaravelDaily/Booking-Com-Simulation-Laravel/commit/52974438c53334b5c1ee8b57e2ac08da4025365f">in the repository branch</a>.</p>
</article>
                    
                                        <div class="flex gap-4 justify-between mt-8">
                                                    <div></div>
                        
                                                                                    <button type="button" class="button--nav-lesson lesson--complete--next">
                                    <span>Next Lesson: Profile Fields Structure</span>
                                    <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"></path>
</svg>                                </button>
                                                                        </div>
                    
                    <div class="py-8 comments--dark">
                                                    <section wire:id="zXcJqCD03MaCPNLGdrvo" class="comments ">
    <header class="comments-header">
                                                        <div x-data="{ subscriptionsOpen: false}" class="comments-subscription">
                        <button @click.prevent="subscriptionsOpen = true" class="comments-subscription-trigger">
                            Get notified when participating
                        </button>
                        <div class="comments-modal is-compact is-bottom" bottom="bottom" compact="compact" x-show="subscriptionsOpen" @click.outside="subscriptionsOpen = false" style="display: none;">
        <div class="comments-modal-contents">
        <button class="comments-subscription-item" @click="subscriptionsOpen = false" wire:click="updateSelectedNotificationSubscriptionType(&#39;participating&#39;)">
                                    When participating
                                </button>
                                                            <button class="comments-subscription-item" @click="subscriptionsOpen = false" wire:click="updateSelectedNotificationSubscriptionType(&#39;all&#39;)">
                                    On all comments
                                </button>
                                                            <button class="comments-subscription-item" @click="subscriptionsOpen = false" wire:click="updateSelectedNotificationSubscriptionType(&#39;none&#39;)">
                                    Never
                                </button>
    </div>
</div>
                    </div>
                                        </header>

    
                                        <div wire:id="l6cGgkWZHqvbmrz1PJDj" id="comment-1317" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-1317&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/91e96ecfda426f336836df6523e3e947.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Huy Nguyen
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-1317" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            11 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Hi,
Regarding the second approach, we need to add HasRoles trait (from spatie package) to User model, otherwise, almost all the tests will be failed</p>

                </div>
                                                            <div class="comments-reactions">
                                                            <div wire:key="1317👍" wire:click="toggleReaction(&#39;👍&#39;)" class="comments-reaction">
                                    👍 1
                                </div>
                                                                                        <div x-data="{ open: false }" @click.outside="open = false" class="comments-reaction-picker">
                                                                            <button class="comments-reaction-picker-trigger" type="button" @click="open = !open">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="comments-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                        </button>
                                        <div class="comments-modal is-compact is-left" x-show="open" compact="compact" left="left" style="display: none;">
        <div class="comments-modal-contents">
        <div class="comments-reaction-picker-reactions">
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction is-reacted" wire:click="toggleReaction(&#39;👍&#39;)">
                                                        👍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;🥳&#39;)">
                                                        🥳
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👀&#39;)">
                                                        👀
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;😍&#39;)">
                                                        😍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;💅&#39;)">
                                                        💅
                                                    </button>
                                                                                            </div>
    </div>
</div>
                                                                    </div>
                                                    </div>
                                                        </div>
    </div>

    
        
            <div class="comments-nested">
                                                                            <div wire:id="Y4c3lmcNq2tWOWhD7JJC" id="comment-1325" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-1325&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/78105bf3a4fef5447155824284d12d1d.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Povilas Korop
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-1325" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            10 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Of course, well spotted! I did it in the repository but forgot to write it in the course lesson. Fixed, thanks!</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:Y4c3lmcNq2tWOWhD7JJC -->                                                                                                <div class="comments-form comments-reply">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                <form class="comments-form-inner" wire:submit.prevent="reply">
            <div x-data="{ isExpanded: false }" x-init="
                    $wire.on(&#39;reply-1317&#39;, () =&gt; {
                        isExpanded = false;
                    });
                ">
                <input x-show="!isExpanded" @click="isExpanded = true" @focus="isExpanded = true" class="comments-placeholder" placeholder="Leave a reply">
                <div x-show="isExpanded" style="display: none;">
                    <div>
                        <div x-data="compose({ text: window.Livewire.find(&#39;l6cGgkWZHqvbmrz1PJDj&#39;).entangle(&#39;replyText&#39;), autofocus: true })" x-init="
        $wire.on(&#39;comment&#39;, clear);
                    $wire.on(&#39;reply-1317&#39;, () =&gt; {
                clear();
            });
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a reply" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a reply</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                                <button type="submit" class="comments-button" submit="submit">
    Reply
</button>
                        <button type="button" class="comments-button is-link" link="link" @click="isExpanded = false">
    Cancel
</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
                                                </div>
            </div>

<!-- Livewire Component wire-end:l6cGgkWZHqvbmrz1PJDj -->                                                <div wire:id="RXapYrNfAVE09IIw3q3D" id="comment-1332" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-1332&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/3694fe96d88fe63149b850949540ddde.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Andrea Verrecchia
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-1332" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            10 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>If I wanted to add specific data in the register method for both the property owner and simple user, I would create two additional reference tables (e.g. property_owners and simple_users) and add the fields userable_id and userable_type to the users table (via morph). Additionally, would it be appropriate to adjust the role_id?</p>

                </div>
                                                            <div class="comments-reactions">
                                                                                        <div x-data="{ open: false }" @click.outside="open = false" class="comments-reaction-picker">
                                                                            <button class="comments-reaction-picker-trigger" type="button" @click="open = !open">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="comments-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                        </button>
                                        <div class="comments-modal is-compact is-left" x-show="open" compact="compact" left="left" style="display: none;">
        <div class="comments-modal-contents">
        <div class="comments-reaction-picker-reactions">
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👍&#39;)">
                                                        👍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;🥳&#39;)">
                                                        🥳
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👀&#39;)">
                                                        👀
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;😍&#39;)">
                                                        😍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;💅&#39;)">
                                                        💅
                                                    </button>
                                                                                            </div>
    </div>
</div>
                                                                    </div>
                                                    </div>
                                                        </div>
    </div>

    
        
            <div class="comments-nested">
                                                                            <div wire:id="AO9PvMxnvT7e3qsxY0J8" id="comment-1339" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-1339&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/78105bf3a4fef5447155824284d12d1d.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Povilas Korop
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-1339" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            10 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>It would work probably but not my favorite approach.</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:AO9PvMxnvT7e3qsxY0J8 -->                                                                                                <div class="comments-form comments-reply">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                <form class="comments-form-inner" wire:submit.prevent="reply">
            <div x-data="{ isExpanded: false }" x-init="
                    $wire.on(&#39;reply-1332&#39;, () =&gt; {
                        isExpanded = false;
                    });
                ">
                <input x-show="!isExpanded" @click="isExpanded = true" @focus="isExpanded = true" class="comments-placeholder" placeholder="Leave a reply">
                <div x-show="isExpanded" style="display: none;">
                    <div>
                        <div x-data="compose({ text: window.Livewire.find(&#39;RXapYrNfAVE09IIw3q3D&#39;).entangle(&#39;replyText&#39;), autofocus: true })" x-init="
        $wire.on(&#39;comment&#39;, clear);
                    $wire.on(&#39;reply-1332&#39;, () =&gt; {
                clear();
            });
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a reply" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a reply</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                                <button type="submit" class="comments-button" submit="submit">
    Reply
</button>
                        <button type="button" class="comments-button is-link" link="link" @click="isExpanded = false">
    Cancel
</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
                                                </div>
            </div>

<!-- Livewire Component wire-end:RXapYrNfAVE09IIw3q3D -->                                                <div wire:id="RFYSsNpYMOXRhAXXHXoW" id="comment-1397" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-1397&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/0802b6c92229aed3e64ba68273d298ea.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Yuri
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-1397" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            10 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Hi. I stuck on the testing part...
These 2 tests returns Expected response status code [200] but received 403:
test_user_has_access_to_bookings_feature, test_property_owner_has_access_to_properties_feature.</p>
<p>I did $this-&gt;withoutExceptionHandling() and got this message:  This action is unauthorized.</p>
<p>But in the PostMan everithing is ok and I got this:
{
"success": true
}
and status: 200</p>
<p>Could you explain me how it possible and how to fix this issue? Thank you</p>

                </div>
                                                            <div class="comments-reactions">
                                                                                        <div x-data="{ open: false }" @click.outside="open = false" class="comments-reaction-picker">
                                                                            <button class="comments-reaction-picker-trigger" type="button" @click="open = !open">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="comments-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                        </button>
                                        <div class="comments-modal is-compact is-left" x-show="open" compact="compact" left="left" style="display: none;">
        <div class="comments-modal-contents">
        <div class="comments-reaction-picker-reactions">
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👍&#39;)">
                                                        👍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;🥳&#39;)">
                                                        🥳
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👀&#39;)">
                                                        👀
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;😍&#39;)">
                                                        😍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;💅&#39;)">
                                                        💅
                                                    </button>
                                                                                            </div>
    </div>
</div>
                                                                    </div>
                                                    </div>
                                                        </div>
    </div>

    
        
            <div class="comments-nested">
                                                                            <div wire:id="Q9rpeaDj8PxzKiMLyceg" id="comment-1398" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-1398&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/78105bf3a4fef5447155824284d12d1d.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Povilas Korop
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-1398" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            10 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Hard to say what you did wrong without seeing the code. If you put your code on GitHub and invite me (username PovilasKorop), I may take a look.</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:Q9rpeaDj8PxzKiMLyceg -->                                                                                <div wire:id="MTWftoDu8VW7B6afCiAB" id="comment-1408" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-1408&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/0802b6c92229aed3e64ba68273d298ea.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Yuri
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-1408" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            10 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>invited</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:MTWftoDu8VW7B6afCiAB -->                                                                                <div wire:id="pj6ylAJ8pqxzYzRTzQUq" id="comment-1416" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-1416&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/78105bf3a4fef5447155824284d12d1d.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Povilas Korop
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-1416" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            10 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Spent 30 minutes debugging, finally found it.
In DatabaseSeeder, you seed users but you don't seed the permissions, PermissionSeeder is missing from there.</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:pj6ylAJ8pqxzYzRTzQUq -->                                                                                <div wire:id="kBlJRkAceMqMIuLYVV2i" id="comment-1417" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-1417&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/0802b6c92229aed3e64ba68273d298ea.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Yuri
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-1417" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            10 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Yes, I missed that... Thanks for your help!</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:kBlJRkAceMqMIuLYVV2i -->                                                                                                <div class="comments-form comments-reply">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                <form class="comments-form-inner" wire:submit.prevent="reply">
            <div x-data="{ isExpanded: false }" x-init="
                    $wire.on(&#39;reply-1397&#39;, () =&gt; {
                        isExpanded = false;
                    });
                ">
                <input x-show="!isExpanded" @click="isExpanded = true" @focus="isExpanded = true" class="comments-placeholder" placeholder="Leave a reply">
                <div x-show="isExpanded" style="display: none;">
                    <div>
                        <div x-data="compose({ text: window.Livewire.find(&#39;RFYSsNpYMOXRhAXXHXoW&#39;).entangle(&#39;replyText&#39;), autofocus: true })" x-init="
        $wire.on(&#39;comment&#39;, clear);
                    $wire.on(&#39;reply-1397&#39;, () =&gt; {
                clear();
            });
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a reply" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a reply</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                                <button type="submit" class="comments-button" submit="submit">
    Reply
</button>
                        <button type="button" class="comments-button is-link" link="link" @click="isExpanded = false">
    Cancel
</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
                                                </div>
            </div>

<!-- Livewire Component wire-end:RFYSsNpYMOXRhAXXHXoW -->                                                <div wire:id="uDth5QX7Bt5m9SupJpAv" id="comment-1446" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-1446&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/b264bf22562f34cc45581519fde7e345.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Bless Darah
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-1446" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            10 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Just in case anyone is having <code>id is ambigous</code> problem in the <code>GateDefineMiddleware</code>, you should make sure that the query part looks like so:
<code> $query-&gt;where('roles.id', auth()-&gt;user()-&gt;role_id);</code>
So that the where clause is more specific.</p>

                </div>
                                                            <div class="comments-reactions">
                                                            <div wire:key="1446👍" wire:click="toggleReaction(&#39;👍&#39;)" class="comments-reaction">
                                    👍 1
                                </div>
                                                                                        <div x-data="{ open: false }" @click.outside="open = false" class="comments-reaction-picker">
                                                                            <button class="comments-reaction-picker-trigger" type="button" @click="open = !open">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="comments-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                        </button>
                                        <div class="comments-modal is-compact is-left" x-show="open" compact="compact" left="left" style="display: none;">
        <div class="comments-modal-contents">
        <div class="comments-reaction-picker-reactions">
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction is-reacted" wire:click="toggleReaction(&#39;👍&#39;)">
                                                        👍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;🥳&#39;)">
                                                        🥳
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👀&#39;)">
                                                        👀
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;😍&#39;)">
                                                        😍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;💅&#39;)">
                                                        💅
                                                    </button>
                                                                                            </div>
    </div>
</div>
                                                                    </div>
                                                    </div>
                                                        </div>
    </div>

    
        
            <div class="comments-nested">
                                                                            <div wire:id="Tn6uVSh1tBsRB7U7gwpu" id="comment-1448" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-1448&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/0802b6c92229aed3e64ba68273d298ea.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Yuri
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-1448" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            10 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Probably you should use $query-&gt;where('<strong>id</strong>', auth()-&gt;user()-&gt;role_id) instead $query-&gt;where('<strong>roles.id</strong>', auth()-&gt;user()-&gt;role_id)</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:Tn6uVSh1tBsRB7U7gwpu -->                                                                                <div wire:id="fCVBR7xCW1ZDd580AZje" id="comment-1450" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-1450&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/b264bf22562f34cc45581519fde7e345.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Bless Darah
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-1450" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            10 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>I did that as the tutorial but i had the ambiguous error as mentioned</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:fCVBR7xCW1ZDd580AZje -->                                                                                <div wire:id="ijUrejK0VE2hx3RPImdz" id="comment-1872" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-1872&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/23cd2039cc3aac819752e8dd312e0d2b.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    yussuf
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-1872" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            9 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>What Bless Darah suggested worked like a charm to me.</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:ijUrejK0VE2hx3RPImdz -->                                                                                <div wire:id="U18vfm95i3uB8IP2HYsE" id="comment-1873" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-1873&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/78105bf3a4fef5447155824284d12d1d.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Povilas Korop
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-1873" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            9 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Thanks everyone for flagging this, I fixed in the article.</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:U18vfm95i3uB8IP2HYsE -->                                                                                <div wire:id="gbQGzIW30BpGVAHgQtCB" id="comment-2019" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2019&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/575e489f601859e5b7f38e05a5429b20.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    daniel MB
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2019" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            9 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>don't forget to clear the cache of the configuration sometime you thtink everthing is right and is not workin "php artisan config:clear" can help you if is a cache problem</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:gbQGzIW30BpGVAHgQtCB -->                                                                                                <div class="comments-form comments-reply">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                <form class="comments-form-inner" wire:submit.prevent="reply">
            <div x-data="{ isExpanded: false }" x-init="
                    $wire.on(&#39;reply-1446&#39;, () =&gt; {
                        isExpanded = false;
                    });
                ">
                <input x-show="!isExpanded" @click="isExpanded = true" @focus="isExpanded = true" class="comments-placeholder" placeholder="Leave a reply">
                <div x-show="isExpanded" style="display: none;">
                    <div>
                        <div x-data="compose({ text: window.Livewire.find(&#39;uDth5QX7Bt5m9SupJpAv&#39;).entangle(&#39;replyText&#39;), autofocus: true })" x-init="
        $wire.on(&#39;comment&#39;, clear);
                    $wire.on(&#39;reply-1446&#39;, () =&gt; {
                clear();
            });
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a reply" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a reply</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                                <button type="submit" class="comments-button" submit="submit">
    Reply
</button>
                        <button type="button" class="comments-button is-link" link="link" @click="isExpanded = false">
    Cancel
</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
                                                </div>
            </div>

<!-- Livewire Component wire-end:uDth5QX7Bt5m9SupJpAv -->                                                <div wire:id="nd59lAoExmoEepJZzqQ5" id="comment-2188" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2188&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/7c1805a01d97e7448bb63fc59cbca068.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Rishikant
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2188" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            8 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Hi,
I have some issue while using on hitting registation API.</p>
<p>$request-&gt;validate([
'name' =&gt; ['required', 'string', 'max:255'],
'email' =&gt; ['required', 'string', 'email', 'max:255', 'unique:users'],
'password' =&gt; ['required', 'confirmed', Password::defaults()],
'role_id' =&gt; ['required', Rule::in(Role::ROLE_OWNER, Role::ROLE_USER)],
]);</p>
<p>I changed it to</p>
<hr>
<p>$validator = Validator::make($request-&gt;all(), [
'name' =&gt; ['required', 'string', 'max:255'],
'email' =&gt; ['required', 'string', 'email', 'max:255', 'unique:users'],
'password' =&gt; ['required', 'confirmed', Password::defaults()],
'role_id' =&gt; ['required', Rule::in(Role::ROLE_OWNER, Role::ROLE_USER)],
]);</p>
<div class="relative code-block-wrapper"><pre style="background-color: #ffffff"><code id="clipText-55"><span><span style="color: #24292F">    </span><span style="color: #CF222E">if</span><span style="color: #24292F"> ($validator</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">fails</span><span style="color: #24292F">()) {</span></span>
<span><span style="color: #24292F">        $response </span><span style="color: #CF222E">=</span><span style="color: #24292F"> [</span></span>
<span><span style="color: #24292F">            </span><span style="color: #0A3069">'code'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0550AE">200</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">            </span><span style="color: #0A3069">'status'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0550AE">false</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">            </span><span style="color: #0A3069">'message'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> $validator</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">errors</span><span style="color: #24292F">()</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">first</span><span style="color: #24292F">(),</span></span>
<span><span style="color: #24292F">        ];</span></span>
<span><span style="color: #24292F">        </span><span style="color: #CF222E">return</span><span style="color: #24292F"> </span><span style="color: #8250DF">response</span><span style="color: #24292F">()</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">json</span><span style="color: #24292F">($response, </span><span style="color: #0550AE">200</span><span style="color: #24292F">);</span></span>
<span><span style="color: #24292F">    }</span></span>
<span></span></code></pre><button id="clipButton-55" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-55"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Now working fine.
What do you suggest?</p>

                </div>
                                                            <div class="comments-reactions">
                                                                                        <div x-data="{ open: false }" @click.outside="open = false" class="comments-reaction-picker">
                                                                            <button class="comments-reaction-picker-trigger" type="button" @click="open = !open">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="comments-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                        </button>
                                        <div class="comments-modal is-compact is-left" x-show="open" compact="compact" left="left" style="display: none;">
        <div class="comments-modal-contents">
        <div class="comments-reaction-picker-reactions">
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👍&#39;)">
                                                        👍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;🥳&#39;)">
                                                        🥳
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👀&#39;)">
                                                        👀
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;😍&#39;)">
                                                        😍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;💅&#39;)">
                                                        💅
                                                    </button>
                                                                                            </div>
    </div>
</div>
                                                                    </div>
                                                    </div>
                                                        </div>
    </div>

    
        
            <div class="comments-nested">
                                                                            <div wire:id="lfJXW2KhNx2INmne8hJb" id="comment-2201" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2201&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/78105bf3a4fef5447155824284d12d1d.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Povilas Korop
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2201" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            8 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Not sure what "some issue" you had so can't comment on that.
But, when returning the error in the API, you MUST return the status code not 200.</p>
<p>In case of validation error, the error should be 422.</p>
<p>If you return 200, API client would understand it as a successful response, without any errors.</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:lfJXW2KhNx2INmne8hJb -->                                                                                                <div class="comments-form comments-reply">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                <form class="comments-form-inner" wire:submit.prevent="reply">
            <div x-data="{ isExpanded: false }" x-init="
                    $wire.on(&#39;reply-2188&#39;, () =&gt; {
                        isExpanded = false;
                    });
                ">
                <input x-show="!isExpanded" @click="isExpanded = true" @focus="isExpanded = true" class="comments-placeholder" placeholder="Leave a reply">
                <div x-show="isExpanded" style="display: none;">
                    <div>
                        <div x-data="compose({ text: window.Livewire.find(&#39;nd59lAoExmoEepJZzqQ5&#39;).entangle(&#39;replyText&#39;), autofocus: true })" x-init="
        $wire.on(&#39;comment&#39;, clear);
                    $wire.on(&#39;reply-2188&#39;, () =&gt; {
                clear();
            });
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a reply" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a reply</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                                <button type="submit" class="comments-button" submit="submit">
    Reply
</button>
                        <button type="button" class="comments-button is-link" link="link" @click="isExpanded = false">
    Cancel
</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
                                                </div>
            </div>

<!-- Livewire Component wire-end:nd59lAoExmoEepJZzqQ5 -->                                                <div wire:id="WdTA4XypcX2jmLsfZzT4" id="comment-2202" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2202&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/7c1805a01d97e7448bb63fc59cbca068.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Rishikant
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2202" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            8 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Hi
I got this error on test.
FAIL  Tests\Feature\AuthTest
⨯ registration fails with admin role                                                                        0.38s
✓ registration succeeds with owner role                                                                     0.06s
✓ registration succeeds with user role                                                                      0.05s
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────
FAILED  Tests\Feature\AuthTest &gt; registration fails with admin role
Expected response status code [422] but received 200.
Failed asserting that 422 is identical to 200.</p>
<p>Please explain this concept.</p>

                </div>
                                                            <div class="comments-reactions">
                                                                                        <div x-data="{ open: false }" @click.outside="open = false" class="comments-reaction-picker">
                                                                            <button class="comments-reaction-picker-trigger" type="button" @click="open = !open">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="comments-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                        </button>
                                        <div class="comments-modal is-compact is-left" x-show="open" compact="compact" left="left" style="display: none;">
        <div class="comments-modal-contents">
        <div class="comments-reaction-picker-reactions">
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👍&#39;)">
                                                        👍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;🥳&#39;)">
                                                        🥳
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👀&#39;)">
                                                        👀
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;😍&#39;)">
                                                        😍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;💅&#39;)">
                                                        💅
                                                    </button>
                                                                                            </div>
    </div>
</div>
                                                                    </div>
                                                    </div>
                                                        </div>
    </div>

    
        
            <div class="comments-nested">
                                                                            <div wire:id="s6kHq0PHkDzlzuXAKjot" id="comment-2214" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2214&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/78105bf3a4fef5447155824284d12d1d.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Povilas Korop
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2214" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            8 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>I can't explain this concept without your code, but it seems like the same error you had in another case - that you return 200 status code in case of error, and you should return a proper validation error with the code something like 422.</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:s6kHq0PHkDzlzuXAKjot -->                                                                                                <div class="comments-form comments-reply">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                <form class="comments-form-inner" wire:submit.prevent="reply">
            <div x-data="{ isExpanded: false }" x-init="
                    $wire.on(&#39;reply-2202&#39;, () =&gt; {
                        isExpanded = false;
                    });
                ">
                <input x-show="!isExpanded" @click="isExpanded = true" @focus="isExpanded = true" class="comments-placeholder" placeholder="Leave a reply">
                <div x-show="isExpanded" style="display: none;">
                    <div>
                        <div x-data="compose({ text: window.Livewire.find(&#39;WdTA4XypcX2jmLsfZzT4&#39;).entangle(&#39;replyText&#39;), autofocus: true })" x-init="
        $wire.on(&#39;comment&#39;, clear);
                    $wire.on(&#39;reply-2202&#39;, () =&gt; {
                clear();
            });
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a reply" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a reply</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                                <button type="submit" class="comments-button" submit="submit">
    Reply
</button>
                        <button type="button" class="comments-button is-link" link="link" @click="isExpanded = false">
    Cancel
</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
                                                </div>
            </div>

<!-- Livewire Component wire-end:WdTA4XypcX2jmLsfZzT4 -->                                                <div wire:id="M4xoDr8sgc8LMWVCs2Hw" id="comment-2372" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2372&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/8b6d00be6dad555e238c2b592460acc1.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Sergey
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2372" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            8 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>hi, please help me, i try run test? but i have a lot of mistakes,</p>
<p>Tests\Feature\PropertiesTest &gt; property owner has access to properties feature                                                            QueryException<br>
SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (<code>testing</code>.<code>users</code>, CONSTRAINT <code>users_role_id _foreign</code> FOREIGN KEY (<code>role_id</code>) REFERENCES <code>roles</code> (<code>id</code>)) (Connection: mysql, SQL: insert into <code>users</code> (<code>name</code>, <code>email</code>, <code>email_verified_at</code>, <code>password</code>, <code>remember _token</code>, <code>role_id</code>, <code>updated_at</code>, <code>created_at</code>) values (Sabina Tremblay, brown.alphonso@example.net, 2023-06-28 06:56:17, $2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.</p>

                </div>
                                                            <div class="comments-reactions">
                                                                                        <div x-data="{ open: false }" @click.outside="open = false" class="comments-reaction-picker">
                                                                            <button class="comments-reaction-picker-trigger" type="button" @click="open = !open">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="comments-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                        </button>
                                        <div class="comments-modal is-compact is-left" x-show="open" compact="compact" left="left" style="display: none;">
        <div class="comments-modal-contents">
        <div class="comments-reaction-picker-reactions">
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👍&#39;)">
                                                        👍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;🥳&#39;)">
                                                        🥳
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👀&#39;)">
                                                        👀
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;😍&#39;)">
                                                        😍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;💅&#39;)">
                                                        💅
                                                    </button>
                                                                                            </div>
    </div>
</div>
                                                                    </div>
                                                    </div>
                                                        </div>
    </div>

    
        
            <div class="comments-nested">
                                                                            <div wire:id="G8A7Wa2LMqG1QY8To7KD" id="comment-2373" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2373&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/8b6d00be6dad555e238c2b592460acc1.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Sergey
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2373" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            8 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>where i send scrin?</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:G8A7Wa2LMqG1QY8To7KD -->                                                                                <div wire:id="Tl5o6dodoWajk4InGYen" id="comment-2374" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2374&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/8b6d00be6dad555e238c2b592460acc1.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Sergey
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2374" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            8 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <div class="relative code-block-wrapper"><pre style="background-color: #ffffff"><code id="clipText-56"><span><span style="color: #CF222E">public</span><span style="color: #24292F"> </span><span style="color: #CF222E">function</span><span style="color: #24292F"> </span><span style="color: #8250DF">test_property_owner_has_access_to_properties_feature</span><span style="color: #24292F">()</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #CF222E">void</span></span>
<span><span style="color: #24292F">    {</span></span>
<span></span>
<span><span style="color: #24292F">        $owner </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">User</span><span style="color: #CF222E">::</span><span style="color: #8250DF">factory</span><span style="color: #24292F">()</span></span>
<span><span style="color: #24292F">            </span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">create</span><span style="color: #24292F">([</span></span>
<span><span style="color: #24292F">                </span><span style="color: #0A3069">'role_id'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0550AE">Role</span><span style="color: #CF222E">::</span><span style="color: #0550AE">ROLE_OWNER</span></span>
<span><span style="color: #24292F">            ]);</span></span>
<span></span>
<span><span style="color: #24292F">        $response </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">$this</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">actingAs</span><span style="color: #24292F">($owner)</span></span>
<span><span style="color: #24292F">            </span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">getJson</span><span style="color: #24292F">(</span><span style="color: #0A3069">'/api/v1/owner/properties'</span><span style="color: #24292F">);</span></span>
<span></span>
<span><span style="color: #24292F">        $response</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">assertStatus</span><span style="color: #24292F">(</span><span style="color: #0550AE">200</span><span style="color: #24292F">);</span></span>
<span><span style="color: #24292F">    }</span></span>
<span><span style="color: #24292F">		</span><span style="color: #0A3069">```</span></span>
<span></span></code></pre><button id="clipButton-56" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-56"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:Tl5o6dodoWajk4InGYen -->                                                                                <div wire:id="GrAcnVwFitcUBPlp6qcz" id="comment-2384" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2384&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/78105bf3a4fef5447155824284d12d1d.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Povilas Korop
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2384" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            8 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>My guess is that you haven't run the seeders for the Roles.</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:GrAcnVwFitcUBPlp6qcz -->                                                                                <div wire:id="2KmhIsev6GtvEc1f3yVM" id="comment-2385" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2385&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/8b6d00be6dad555e238c2b592460acc1.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Sergey
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2385" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            8 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>i run all seed seed RoleSeeder, AdminUserSeeder, PermissionSeeder, but when i test it increment in tables roles increases  and id != 1,2,3
id increases with each test 5,6,7,</p>
<p>and we get error</p>
<div class="relative code-block-wrapper"><pre style="background-color: #ffffff"><code id="clipText-57"><span><span style="color: #24292F">Tests\Feature\PropertiesTest </span><span style="color: #CF222E">&gt;</span><span style="color: #24292F"> property </span><span style="color: #CF222E">owner</span><span style="color: #24292F"> has access </span><span style="color: #CF222E">to</span><span style="color: #24292F"> properties feature QueryException</span></span>
<span><span style="color: #24292F">SQLSTATE[23000]: Integrity </span><span style="color: #CF222E">constraint</span><span style="color: #24292F"> violation: </span><span style="color: #0550AE">1452</span><span style="color: #24292F"> Cannot </span><span style="color: #CF222E">add</span><span style="color: #24292F"> </span><span style="color: #CF222E">or</span><span style="color: #24292F"> </span><span style="color: #CF222E">update</span><span style="color: #24292F"> a child </span><span style="color: #CF222E">row</span><span style="color: #24292F">: a </span><span style="color: #CF222E">foreign key</span><span style="color: #24292F"> </span><span style="color: #CF222E">constraint</span><span style="color: #24292F"> fails (</span><span style="color: #0550AE">testing</span><span style="color: #24292F">.</span><span style="color: #0550AE">users</span><span style="color: #24292F">, </span><span style="color: #CF222E">CONSTRAINT</span><span style="color: #24292F"> users_role_id _foreign </span><span style="color: #CF222E">FOREIGN KEY</span><span style="color: #24292F"> (role_id) </span><span style="color: #CF222E">REFERENCES</span><span style="color: #24292F"> roles (id)) (Connection: mysql, </span><span style="color: #CF222E">SQL</span><span style="color: #24292F">: </span><span style="color: #CF222E">insert</span><span style="color: #24292F"> </span><span style="color: #CF222E">into</span><span style="color: #24292F"> users (</span><span style="color: #CF222E">name</span><span style="color: #24292F">, email, email_verified_at, </span><span style="color: #CF222E">password</span><span style="color: #24292F">, remember _token, role_id, updated_at, created_at) </span><span style="color: #CF222E">values</span><span style="color: #24292F"> (Sabina Tremblay, </span><span style="color: #0550AE">brown</span><span style="color: #24292F">.</span><span style="color: #0550AE">alphonso</span><span style="color: #24292F">@example.net, </span><span style="color: #0550AE">2023</span><span style="color: #CF222E">-</span><span style="color: #0550AE">06</span><span style="color: #CF222E">-</span><span style="color: #0550AE">28</span><span style="color: #24292F"> </span><span style="color: #0550AE">06</span><span style="color: #24292F">:</span><span style="color: #0550AE">56</span><span style="color: #24292F">:</span><span style="color: #0550AE">17</span><span style="color: #24292F">, $2y$</span><span style="color: #0550AE">10</span><span style="color: #24292F">$</span><span style="color: #0550AE">92IXUNpkjO0rOQ5byMi</span><span style="color: #24292F">.</span><span style="color: #0550AE">Ye4oKoEa3Ro9llC</span><span style="color: #CF222E">/</span><span style="color: #24292F">.</span></span>
<span></span></code></pre><button id="clipButton-57" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-57"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:2KmhIsev6GtvEc1f3yVM -->                                                                                <div wire:id="037hyLya1AZID8nPmCaS" id="comment-2400" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2400&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/78105bf3a4fef5447155824284d12d1d.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Povilas Korop
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2400" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            8 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>You need to run those seeds as part of the tests, not separately. It should be a part of your RefreshDatabase, please compare your code to my code in the repository where I run seeders in the tests.</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:037hyLya1AZID8nPmCaS -->                                                                                <div wire:id="xV49efp4m72xzpWa3eN9" id="comment-2416" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2416&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/8b6d00be6dad555e238c2b592460acc1.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Sergey
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2416" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            8 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>thanks, but i take your code and it don't working, problem with test User::factory()-&gt;create(['role_id' =&gt; Role::ROLE_USER]);</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:xV49efp4m72xzpWa3eN9 -->                                                                                <div wire:id="VtPjHj56EqoeKILd4AUd" id="comment-2418" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2418&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/78105bf3a4fef5447155824284d12d1d.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Povilas Korop
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2418" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            8 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>You're saying that you take the code directly from the repository, don't change anything, run tests and they fail? Then I would need to debug it, but no one else complained, and it was working last time I checked.</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:VtPjHj56EqoeKILd4AUd -->                                                                                <div wire:id="u5uYV0JVwPexYa3QbS8Z" id="comment-2422" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2422&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/8b6d00be6dad555e238c2b592460acc1.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Sergey
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2422" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            8 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>so it is, i clone  your repository and install packages composer, add data base and  install migration successfully, but run tests with error, sorry</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:u5uYV0JVwPexYa3QbS8Z -->                                                                                <div wire:id="LNaMSH4J6glu9mt0BB8z" id="comment-2423" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2423&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/8b6d00be6dad555e238c2b592460acc1.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Sergey
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2423" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            8 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Sorry, i will be find error, thanks for any help!</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:LNaMSH4J6glu9mt0BB8z -->                                                                                                <div class="comments-form comments-reply">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                <form class="comments-form-inner" wire:submit.prevent="reply">
            <div x-data="{ isExpanded: false }" x-init="
                    $wire.on(&#39;reply-2372&#39;, () =&gt; {
                        isExpanded = false;
                    });
                ">
                <input x-show="!isExpanded" @click="isExpanded = true" @focus="isExpanded = true" class="comments-placeholder" placeholder="Leave a reply">
                <div x-show="isExpanded" style="display: none;">
                    <div>
                        <div x-data="compose({ text: window.Livewire.find(&#39;M4xoDr8sgc8LMWVCs2Hw&#39;).entangle(&#39;replyText&#39;), autofocus: true })" x-init="
        $wire.on(&#39;comment&#39;, clear);
                    $wire.on(&#39;reply-2372&#39;, () =&gt; {
                clear();
            });
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a reply" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a reply</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                                <button type="submit" class="comments-button" submit="submit">
    Reply
</button>
                        <button type="button" class="comments-button is-link" link="link" @click="isExpanded = false">
    Cancel
</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
                                                </div>
            </div>

<!-- Livewire Component wire-end:M4xoDr8sgc8LMWVCs2Hw -->                                                <div wire:id="KmkfIBd9PCdpNgmhZRR7" id="comment-2600" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2600&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/82582bcbe1e41c372b8502bf58b40457.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Noarifumirimota
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2600" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            7 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Hi, i have got weird problem.</p>
<p>I use "php artisan make:test AuthTest" command. Filled up this file, and when i want use "php artisan test" console return "No tests found".</p>
<p>When i try use "make" command again i recieve "Test already exists".</p>

                </div>
                                                            <div class="comments-reactions">
                                                                                        <div x-data="{ open: false }" @click.outside="open = false" class="comments-reaction-picker">
                                                                            <button class="comments-reaction-picker-trigger" type="button" @click="open = !open">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="comments-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                        </button>
                                        <div class="comments-modal is-compact is-left" x-show="open" compact="compact" left="left" style="display: none;">
        <div class="comments-modal-contents">
        <div class="comments-reaction-picker-reactions">
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👍&#39;)">
                                                        👍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;🥳&#39;)">
                                                        🥳
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👀&#39;)">
                                                        👀
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;😍&#39;)">
                                                        😍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;💅&#39;)">
                                                        💅
                                                    </button>
                                                                                            </div>
    </div>
</div>
                                                                    </div>
                                                    </div>
                                                        </div>
    </div>

    
        
            <div class="comments-nested">
                                                                            <div wire:id="UAoDJ55chLs4uwwnWhoa" id="comment-2603" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2603&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/78105bf3a4fef5447155824284d12d1d.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Povilas Korop
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2603" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            7 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>"No tests found" may mean two things:</p>
<ul>
<li>Either no test methods in any test class</li>
<li>Or in your phpunit.xml you changed the configuration and Laravel is looking for tests in a different folder</li>
</ul>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:UAoDJ55chLs4uwwnWhoa -->                                                                                <div wire:id="VttPwhkVWBhZcFmqgm7b" id="comment-2613" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2613&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/82582bcbe1e41c372b8502bf58b40457.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Noarifumirimota
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2613" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            7 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Thank you for your help.</p>
<p>I found a solution, the first test function was without the word "test_".</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:VttPwhkVWBhZcFmqgm7b -->                                                                                                <div class="comments-form comments-reply">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                <form class="comments-form-inner" wire:submit.prevent="reply">
            <div x-data="{ isExpanded: false }" x-init="
                    $wire.on(&#39;reply-2600&#39;, () =&gt; {
                        isExpanded = false;
                    });
                ">
                <input x-show="!isExpanded" @click="isExpanded = true" @focus="isExpanded = true" class="comments-placeholder" placeholder="Leave a reply">
                <div x-show="isExpanded" style="display: none;">
                    <div>
                        <div x-data="compose({ text: window.Livewire.find(&#39;KmkfIBd9PCdpNgmhZRR7&#39;).entangle(&#39;replyText&#39;), autofocus: true })" x-init="
        $wire.on(&#39;comment&#39;, clear);
                    $wire.on(&#39;reply-2600&#39;, () =&gt; {
                clear();
            });
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a reply" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a reply</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                                <button type="submit" class="comments-button" submit="submit">
    Reply
</button>
                        <button type="button" class="comments-button is-link" link="link" @click="isExpanded = false">
    Cancel
</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
                                                </div>
            </div>

<!-- Livewire Component wire-end:KmkfIBd9PCdpNgmhZRR7 -->                                                <div wire:id="xOYhpoGDD8XUDKnJarPB" id="comment-2778" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2778&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/2e14a3a7e455f1e7d9aaa9065440d854.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    michuu
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2778" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            6 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>How can i put an image in comment? I have problems and I would like to share it. I do not know how do you send a request to http://booking.test/api/auth/register? Default laravel project runs on localhost and this is the domain where I try to send a request to. When I senda a request to http://127.0.0.1:8000/api/auth/register I get some html code but not an access_token in json format.</p>

                </div>
                                                            <div class="comments-reactions">
                                                                                        <div x-data="{ open: false }" @click.outside="open = false" class="comments-reaction-picker">
                                                                            <button class="comments-reaction-picker-trigger" type="button" @click="open = !open">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="comments-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                        </button>
                                        <div class="comments-modal is-compact is-left" x-show="open" compact="compact" left="left" style="display: none;">
        <div class="comments-modal-contents">
        <div class="comments-reaction-picker-reactions">
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👍&#39;)">
                                                        👍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;🥳&#39;)">
                                                        🥳
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👀&#39;)">
                                                        👀
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;😍&#39;)">
                                                        😍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;💅&#39;)">
                                                        💅
                                                    </button>
                                                                                            </div>
    </div>
</div>
                                                                    </div>
                                                    </div>
                                                        </div>
    </div>

    
        
            <div class="comments-nested">
                                                                            <div wire:id="015EWkkrM6zsE8gsm2Zp" id="comment-2783" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-2783&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/78105bf3a4fef5447155824284d12d1d.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Povilas Korop
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-2783" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            6 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>When making the API request, you need to add a Header <code>Accept: application/json</code>. This tells the API endpoint that the client prefers to get data in JSON format and not HTML.</p>
<p>Here's the tutorial from Laravel Daily that may help you: <a href="https://laraveldaily.com/post/laravel-api-error-html-json-how-to-fix">Laravel: API Error Returns HTML and not JSON - How To Fix</a></p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:015EWkkrM6zsE8gsm2Zp -->                                                                                                <div class="comments-form comments-reply">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                <form class="comments-form-inner" wire:submit.prevent="reply">
            <div x-data="{ isExpanded: false }" x-init="
                    $wire.on(&#39;reply-2778&#39;, () =&gt; {
                        isExpanded = false;
                    });
                ">
                <input x-show="!isExpanded" @click="isExpanded = true" @focus="isExpanded = true" class="comments-placeholder" placeholder="Leave a reply">
                <div x-show="isExpanded" style="display: none;">
                    <div>
                        <div x-data="compose({ text: window.Livewire.find(&#39;xOYhpoGDD8XUDKnJarPB&#39;).entangle(&#39;replyText&#39;), autofocus: true })" x-init="
        $wire.on(&#39;comment&#39;, clear);
                    $wire.on(&#39;reply-2778&#39;, () =&gt; {
                clear();
            });
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a reply" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a reply</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                                <button type="submit" class="comments-button" submit="submit">
    Reply
</button>
                        <button type="button" class="comments-button is-link" link="link" @click="isExpanded = false">
    Cancel
</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
                                                </div>
            </div>

<!-- Livewire Component wire-end:xOYhpoGDD8XUDKnJarPB -->                                                <div wire:id="1eEUgRMIE6RHI0jFJtAj" id="comment-3149" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-3149&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/b447ee90463570d18cbbee424ab77004.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Richard A. Hoyle
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-3149" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            5 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Povilas I know this is a long shot but can you do the test in "Pest.php"
since this is the up and coming testing tool these days?
Also do you have a class using Pest?</p>

                </div>
                                                            <div class="comments-reactions">
                                                                                        <div x-data="{ open: false }" @click.outside="open = false" class="comments-reaction-picker">
                                                                            <button class="comments-reaction-picker-trigger" type="button" @click="open = !open">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="comments-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                        </button>
                                        <div class="comments-modal is-compact is-left" x-show="open" compact="compact" left="left" style="display: none;">
        <div class="comments-modal-contents">
        <div class="comments-reaction-picker-reactions">
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👍&#39;)">
                                                        👍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;🥳&#39;)">
                                                        🥳
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👀&#39;)">
                                                        👀
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;😍&#39;)">
                                                        😍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;💅&#39;)">
                                                        💅
                                                    </button>
                                                                                            </div>
    </div>
</div>
                                                                    </div>
                                                    </div>
                                                        </div>
    </div>

    
        
            <div class="comments-nested">
                                                                            <div wire:id="9CE7DtjofNfiH4cgFZkt" id="comment-3157" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-3157&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/78105bf3a4fef5447155824284d12d1d.jpeg" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Povilas Korop
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-3157" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            5 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>I cover PEST at the end of this course: <a href="https://laraveldaily.com/course/laravel-testing">https://laraveldaily.com/course/laravel-testing</a></p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:9CE7DtjofNfiH4cgFZkt -->                                                                                                <div class="comments-form comments-reply">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                <form class="comments-form-inner" wire:submit.prevent="reply">
            <div x-data="{ isExpanded: false }" x-init="
                    $wire.on(&#39;reply-3149&#39;, () =&gt; {
                        isExpanded = false;
                    });
                ">
                <input x-show="!isExpanded" @click="isExpanded = true" @focus="isExpanded = true" class="comments-placeholder" placeholder="Leave a reply">
                <div x-show="isExpanded" style="display: none;">
                    <div>
                        <div x-data="compose({ text: window.Livewire.find(&#39;1eEUgRMIE6RHI0jFJtAj&#39;).entangle(&#39;replyText&#39;), autofocus: true })" x-init="
        $wire.on(&#39;comment&#39;, clear);
                    $wire.on(&#39;reply-3149&#39;, () =&gt; {
                clear();
            });
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a reply" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a reply</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                                <button type="submit" class="comments-button" submit="submit">
    Reply
</button>
                        <button type="button" class="comments-button is-link" link="link" @click="isExpanded = false">
    Cancel
</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
                                                </div>
            </div>

<!-- Livewire Component wire-end:1eEUgRMIE6RHI0jFJtAj -->                                                <div wire:id="2EDXVLmVKybu1YAJlZUN" id="comment-4046" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-4046&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/1751356651b2e610280f4fd399f16223.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    jwinder
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-4046" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            3 months ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>wheres complete step at</p>

                </div>
                                                            <div class="comments-reactions">
                                                                                        <div x-data="{ open: false }" @click.outside="open = false" class="comments-reaction-picker">
                                                                            <button class="comments-reaction-picker-trigger" type="button" @click="open = !open">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="comments-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                        </button>
                                        <div class="comments-modal is-compact is-left" x-show="open" compact="compact" left="left" style="display: none;">
        <div class="comments-modal-contents">
        <div class="comments-reaction-picker-reactions">
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👍&#39;)">
                                                        👍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;🥳&#39;)">
                                                        🥳
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👀&#39;)">
                                                        👀
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;😍&#39;)">
                                                        😍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;💅&#39;)">
                                                        💅
                                                    </button>
                                                                                            </div>
    </div>
</div>
                                                                    </div>
                                                    </div>
                                                        </div>
    </div>

    
        
            <div class="comments-nested">
                                                                                            <div class="comments-form comments-reply">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                <form class="comments-form-inner" wire:submit.prevent="reply">
            <div x-data="{ isExpanded: false }" x-init="
                    $wire.on(&#39;reply-4046&#39;, () =&gt; {
                        isExpanded = false;
                    });
                ">
                <input x-show="!isExpanded" @click="isExpanded = true" @focus="isExpanded = true" class="comments-placeholder" placeholder="Leave a reply">
                <div x-show="isExpanded" style="display: none;">
                    <div>
                        <div x-data="compose({ text: window.Livewire.find(&#39;2EDXVLmVKybu1YAJlZUN&#39;).entangle(&#39;replyText&#39;), autofocus: true })" x-init="
        $wire.on(&#39;comment&#39;, clear);
                    $wire.on(&#39;reply-4046&#39;, () =&gt; {
                clear();
            });
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a reply" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a reply</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                                <button type="submit" class="comments-button" submit="submit">
    Reply
</button>
                        <button type="button" class="comments-button is-link" link="link" @click="isExpanded = false">
    Cancel
</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
                                                </div>
            </div>

<!-- Livewire Component wire-end:2EDXVLmVKybu1YAJlZUN -->                                                <div wire:id="jQ7fyUWCXHgnS2cDg9fL" id="comment-4346" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-4346&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/7ac32cbde8d84e6a979a42caf0fcf12d.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Njuguna Mwangi
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-4346" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            1 month ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>I was using mysql for testing and noted that in the AuthTest tthe first one ran successfully but the other two failed. Did some disgging and found out that the roles tabes get truncated after the fist test. I did some little tweaking and added         $this-&gt;artisan('migrate:fresh --seed'); at the beginning of every function now it works fine</p>
<p>For context:
From</p>
<div class="relative code-block-wrapper"><pre style="background-color: #ffffff"><code id="clipText-58"><span><span style="color: #CF222E">public</span><span style="color: #24292F"> </span><span style="color: #CF222E">function</span><span style="color: #24292F"> </span><span style="color: #8250DF">test_registration_fails_with_admin_role</span><span style="color: #24292F">()</span></span>
<span><span style="color: #24292F">    {</span></span>
<span><span style="color: #24292F">        $response </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">$this</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">postJson</span><span style="color: #24292F">(</span><span style="color: #0A3069">'/api/auth/register'</span><span style="color: #24292F">, [</span></span>
<span><span style="color: #24292F">            </span><span style="color: #0A3069">'name'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0A3069">'Valid name'</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">            </span><span style="color: #0A3069">'email'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0A3069">'valid@email.com'</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">            </span><span style="color: #0A3069">'password'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0A3069">'ValidPassword'</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">            </span><span style="color: #0A3069">'password_confirmation'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0A3069">'ValidPassword'</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">            </span><span style="color: #0A3069">'role_id'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0550AE">Role</span><span style="color: #CF222E">::</span><span style="color: #0550AE">ROLE_ADMINISTRATOR</span></span>
<span><span style="color: #24292F">        ]);</span></span>
<span></span>
<span><span style="color: #24292F">        $response</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">assertStatus</span><span style="color: #24292F">(</span><span style="color: #0550AE">422</span><span style="color: #24292F">);</span></span>
<span><span style="color: #24292F">    }</span></span>
<span></span></code></pre><button id="clipButton-58" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-58"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>To</p>
<div class="relative code-block-wrapper"><pre style="background-color: #ffffff"><code id="clipText-59"><span><span style="color: #CF222E">public</span><span style="color: #24292F"> </span><span style="color: #CF222E">function</span><span style="color: #24292F"> </span><span style="color: #8250DF">test_registration_fails_with_admin_role</span><span style="color: #24292F">()</span></span>
<span><span style="color: #24292F">    {</span></span>
<span><span style="color: #24292F">        </span><span style="color: #0550AE">$this</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">artisan</span><span style="color: #24292F">(</span><span style="color: #0A3069">'migrate:fresh --seed'</span><span style="color: #24292F">);</span></span>
<span></span>
<span><span style="color: #24292F">        $response </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">$this</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">postJson</span><span style="color: #24292F">(</span><span style="color: #0A3069">'/api/auth/register'</span><span style="color: #24292F">, [</span></span>
<span><span style="color: #24292F">            </span><span style="color: #0A3069">'name'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0A3069">'Valid name'</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">            </span><span style="color: #0A3069">'email'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0A3069">'valid@email.com'</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">            </span><span style="color: #0A3069">'password'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0A3069">'ValidPassword'</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">            </span><span style="color: #0A3069">'password_confirmation'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0A3069">'ValidPassword'</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">            </span><span style="color: #0A3069">'role_id'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0550AE">Role</span><span style="color: #CF222E">::</span><span style="color: #0550AE">ROLE_ADMINISTRATOR</span></span>
<span><span style="color: #24292F">        ]);</span></span>
<span></span>
<span><span style="color: #24292F">        $response</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">assertStatus</span><span style="color: #24292F">(</span><span style="color: #0550AE">422</span><span style="color: #24292F">);</span></span>
<span><span style="color: #24292F">    }</span></span>
<span></span></code></pre><button id="clipButton-59" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-59"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>

                </div>
                                                            <div class="comments-reactions">
                                                                                        <div x-data="{ open: false }" @click.outside="open = false" class="comments-reaction-picker">
                                                                            <button class="comments-reaction-picker-trigger" type="button" @click="open = !open">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="comments-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                        </button>
                                        <div class="comments-modal is-compact is-left" x-show="open" compact="compact" left="left" style="display: none;">
        <div class="comments-modal-contents">
        <div class="comments-reaction-picker-reactions">
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👍&#39;)">
                                                        👍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;🥳&#39;)">
                                                        🥳
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👀&#39;)">
                                                        👀
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;😍&#39;)">
                                                        😍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;💅&#39;)">
                                                        💅
                                                    </button>
                                                                                            </div>
    </div>
</div>
                                                                    </div>
                                                    </div>
                                                        </div>
    </div>

    
        
            <div class="comments-nested">
                                                                            <div wire:id="7L5JST7h5TToSOQZxFr8" id="comment-4347" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-4347&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/c85b792036af80dc24e14cf5f24e6984.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Modestas
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-4347" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            1 month ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>You can open TestCase file and add:</p>
<p><code>use Illuminate\Foundation\Testing\RefreshDatabase;</code></p>
<p>and</p>
<p><code>use RefreshDatabase;</code></p>
<p>This will reset the database automatically after each test. Running the artisan command manually is not the best practice (that's why the RefreshDatabase exists) :) Hope that helps!</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:7L5JST7h5TToSOQZxFr8 -->                                                                                                <div class="comments-form comments-reply">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                <form class="comments-form-inner" wire:submit.prevent="reply">
            <div x-data="{ isExpanded: false }" x-init="
                    $wire.on(&#39;reply-4346&#39;, () =&gt; {
                        isExpanded = false;
                    });
                ">
                <input x-show="!isExpanded" @click="isExpanded = true" @focus="isExpanded = true" class="comments-placeholder" placeholder="Leave a reply">
                <div x-show="isExpanded" style="display: none;">
                    <div>
                        <div x-data="compose({ text: window.Livewire.find(&#39;jQ7fyUWCXHgnS2cDg9fL&#39;).entangle(&#39;replyText&#39;), autofocus: true })" x-init="
        $wire.on(&#39;comment&#39;, clear);
                    $wire.on(&#39;reply-4346&#39;, () =&gt; {
                clear();
            });
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a reply" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a reply</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                                <button type="submit" class="comments-button" submit="submit">
    Reply
</button>
                        <button type="button" class="comments-button is-link" link="link" @click="isExpanded = false">
    Cancel
</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
                                                </div>
            </div>

<!-- Livewire Component wire-end:jQ7fyUWCXHgnS2cDg9fL -->                                                <div wire:id="MWrNybvOwZQZJ6Ygykyb" id="comment-4415" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-4415&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/5c28cabc1825e84c30ef5430ad41b33e.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    limewater23
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-4415" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            1 month ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>The test I got this, any idea why?! I did 100% same as tutorial in AuthTest</p>
<div class="relative code-block-wrapper"><pre style="background-color: #ffffff"><code id="clipText-60"><span></span>
<span><span style="color: #24292F">   </span><span style="color: #0550AE">FAIL</span><span style="color: #24292F">  </span><span style="color: #0550AE">Tests</span><span style="color: #24292F">\</span><span style="color: #0550AE">Feature</span><span style="color: #24292F">\</span><span style="color: #0550AE">AuthTest</span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">⨯</span><span style="color: #24292F"> </span><span style="color: #0550AE">registration</span><span style="color: #24292F"> </span><span style="color: #0550AE">fails</span><span style="color: #24292F"> </span><span style="color: #0550AE">with</span><span style="color: #24292F"> </span><span style="color: #0550AE">admin</span><span style="color: #24292F"> </span><span style="color: #0550AE">role</span><span style="color: #24292F">                                                                                                   </span><span style="color: #0550AE">8.21s</span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">⨯</span><span style="color: #24292F"> </span><span style="color: #0550AE">registration</span><span style="color: #24292F"> </span><span style="color: #0550AE">succeeds</span><span style="color: #24292F"> </span><span style="color: #0550AE">with</span><span style="color: #24292F"> </span><span style="color: #0550AE">owner</span><span style="color: #24292F"> </span><span style="color: #0550AE">role</span><span style="color: #24292F">                                                                                                </span><span style="color: #0550AE">0.18s</span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">⨯</span><span style="color: #24292F"> </span><span style="color: #0550AE">registration</span><span style="color: #24292F"> </span><span style="color: #0550AE">succeeds</span><span style="color: #24292F"> </span><span style="color: #0550AE">with</span><span style="color: #24292F"> </span><span style="color: #0550AE">user</span><span style="color: #24292F"> </span><span style="color: #0550AE">role</span><span style="color: #24292F">                                                                                                 </span><span style="color: #0550AE">0.24s</span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span></span>
<span><span style="color: #24292F">   </span><span style="color: #0550AE">FAILED</span><span style="color: #24292F">  </span><span style="color: #0550AE">Tests</span><span style="color: #24292F">\</span><span style="color: #0550AE">Feature</span><span style="color: #24292F">\</span><span style="color: #0550AE">AuthTest</span><span style="color: #24292F"> </span><span style="color: #CF222E">&gt;</span><span style="color: #24292F"> </span><span style="color: #0550AE">registration</span><span style="color: #24292F"> </span><span style="color: #0550AE">fails</span><span style="color: #24292F"> </span><span style="color: #0550AE">with</span><span style="color: #24292F"> </span><span style="color: #0550AE">admin</span><span style="color: #24292F"> </span><span style="color: #0550AE">role</span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">Expected</span><span style="color: #24292F"> </span><span style="color: #0550AE">response</span><span style="color: #24292F"> </span><span style="color: #0550AE">status</span><span style="color: #24292F"> </span><span style="color: #0550AE">code</span><span style="color: #24292F"> [</span><span style="color: #0550AE">422</span><span style="color: #24292F">] </span><span style="color: #0550AE">but</span><span style="color: #24292F"> </span><span style="color: #0550AE">received</span><span style="color: #24292F"> </span><span style="color: #0550AE">500.</span></span>
<span><span style="color: #0550AE">Failed</span><span style="color: #24292F"> </span><span style="color: #0550AE">asserting</span><span style="color: #24292F"> </span><span style="color: #0550AE">that</span><span style="color: #24292F"> </span><span style="color: #0550AE">500</span><span style="color: #24292F"> </span><span style="color: #0550AE">is</span><span style="color: #24292F"> </span><span style="color: #0550AE">identical</span><span style="color: #24292F"> </span><span style="color: #0550AE">to</span><span style="color: #24292F"> </span><span style="color: #0550AE">422.</span></span>
<span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">at</span><span style="color: #24292F"> </span><span style="color: #0550AE">tests</span><span style="color: #CF222E">/</span><span style="color: #0550AE">Feature</span><span style="color: #CF222E">/</span><span style="color: #0550AE">AuthTest</span><span style="color: #CF222E">.</span><span style="color: #0550AE">php</span><span style="color: #24292F">:</span><span style="color: #0550AE">32</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">28▕</span><span style="color: #24292F">         </span><span style="color: #0A3069">'password_confirmation'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0A3069">'ValidPassword'</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">29▕</span><span style="color: #24292F">         </span><span style="color: #0A3069">'role_id'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0550AE">Role</span><span style="color: #CF222E">::</span><span style="color: #0550AE">ROLE_ADMIN</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">30▕</span><span style="color: #24292F">       ]);</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">31▕</span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">➜</span><span style="color: #24292F">  </span><span style="color: #0550AE">32▕</span><span style="color: #24292F">        $response</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">assertStatus</span><span style="color: #24292F">(</span><span style="color: #0550AE">422</span><span style="color: #24292F">);</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">33▕</span><span style="color: #24292F">     }</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">34▕</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">35▕</span><span style="color: #24292F">     </span><span style="color: #CF222E">public</span><span style="color: #24292F"> </span><span style="color: #CF222E">function</span><span style="color: #24292F"> </span><span style="color: #8250DF">test_registration_succeeds_with_owner_role</span><span style="color: #24292F">()</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">36▕</span><span style="color: #24292F">     {</span></span>
<span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span></span>
<span><span style="color: #24292F">   </span><span style="color: #0550AE">FAILED</span><span style="color: #24292F">  </span><span style="color: #0550AE">Tests</span><span style="color: #24292F">\</span><span style="color: #0550AE">Feature</span><span style="color: #24292F">\</span><span style="color: #0550AE">AuthTest</span><span style="color: #24292F"> </span><span style="color: #CF222E">&gt;</span><span style="color: #24292F"> </span><span style="color: #0550AE">registration</span><span style="color: #24292F"> </span><span style="color: #0550AE">succeeds</span><span style="color: #24292F"> </span><span style="color: #0550AE">with</span><span style="color: #24292F"> </span><span style="color: #0550AE">owner</span><span style="color: #24292F"> </span><span style="color: #0550AE">role</span><span style="color: #24292F">                                                               </span><span style="color: #0550AE">Error</span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">Call</span><span style="color: #24292F"> </span><span style="color: #0550AE">to</span><span style="color: #24292F"> </span><span style="color: #0550AE">undefined</span><span style="color: #24292F"> </span><span style="color: #0550AE">method</span><span style="color: #24292F"> </span><span style="color: #0550AE">Tests\Feature\AuthTest</span><span style="color: #CF222E">::</span><span style="color: #8250DF">assertStatus</span><span style="color: #24292F">()</span></span>
<span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">at</span><span style="color: #24292F"> </span><span style="color: #0550AE">tests</span><span style="color: #CF222E">/</span><span style="color: #0550AE">Feature</span><span style="color: #CF222E">/</span><span style="color: #0550AE">AuthTest</span><span style="color: #CF222E">.</span><span style="color: #0550AE">php</span><span style="color: #24292F">:</span><span style="color: #0550AE">45</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">41▕</span><span style="color: #24292F">         </span><span style="color: #0A3069">'password_confirmation'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0A3069">'ValidPassword'</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">42▕</span><span style="color: #24292F">         </span><span style="color: #0A3069">'role_id'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0550AE">Role</span><span style="color: #CF222E">::</span><span style="color: #0550AE">ROLE_OWNER</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">43▕</span><span style="color: #24292F">       ]);</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">44▕</span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">➜</span><span style="color: #24292F">  </span><span style="color: #0550AE">45▕</span><span style="color: #24292F">         $response </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">$this</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">assertStatus</span><span style="color: #24292F">(</span><span style="color: #0550AE">200</span><span style="color: #24292F">)</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">assertJsonStructure</span><span style="color: #24292F">([</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">46▕</span><span style="color: #24292F">           </span><span style="color: #0A3069">'access_token'</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">47▕</span><span style="color: #24292F">         ]);</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">48▕</span><span style="color: #24292F">     }</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">49▕</span></span>
<span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">1</span><span style="color: #24292F">   </span><span style="color: #0550AE">tests</span><span style="color: #CF222E">/</span><span style="color: #0550AE">Feature</span><span style="color: #CF222E">/</span><span style="color: #0550AE">AuthTest</span><span style="color: #CF222E">.</span><span style="color: #0550AE">php</span><span style="color: #24292F">:</span><span style="color: #0550AE">45</span></span>
<span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span></span>
<span><span style="color: #24292F">   </span><span style="color: #0550AE">FAILED</span><span style="color: #24292F">  </span><span style="color: #0550AE">Tests</span><span style="color: #24292F">\</span><span style="color: #0550AE">Feature</span><span style="color: #24292F">\</span><span style="color: #0550AE">AuthTest</span><span style="color: #24292F"> </span><span style="color: #CF222E">&gt;</span><span style="color: #24292F"> </span><span style="color: #0550AE">registration</span><span style="color: #24292F"> </span><span style="color: #0550AE">succeeds</span><span style="color: #24292F"> </span><span style="color: #0550AE">with</span><span style="color: #24292F"> </span><span style="color: #0550AE">user</span><span style="color: #24292F"> </span><span style="color: #0550AE">role</span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">Expected</span><span style="color: #24292F"> </span><span style="color: #0550AE">response</span><span style="color: #24292F"> </span><span style="color: #0550AE">status</span><span style="color: #24292F"> </span><span style="color: #0550AE">code</span><span style="color: #24292F"> [</span><span style="color: #0550AE">200</span><span style="color: #24292F">] </span><span style="color: #0550AE">but</span><span style="color: #24292F"> </span><span style="color: #0550AE">received</span><span style="color: #24292F"> </span><span style="color: #0550AE">500.</span></span>
<span><span style="color: #0550AE">Failed</span><span style="color: #24292F"> </span><span style="color: #0550AE">asserting</span><span style="color: #24292F"> </span><span style="color: #0550AE">that</span><span style="color: #24292F"> </span><span style="color: #0550AE">500</span><span style="color: #24292F"> </span><span style="color: #0550AE">is</span><span style="color: #24292F"> </span><span style="color: #0550AE">identical</span><span style="color: #24292F"> </span><span style="color: #0550AE">to</span><span style="color: #24292F"> </span><span style="color: #0550AE">200.</span></span>
<span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">at</span><span style="color: #24292F"> </span><span style="color: #0550AE">tests</span><span style="color: #CF222E">/</span><span style="color: #0550AE">Feature</span><span style="color: #CF222E">/</span><span style="color: #0550AE">AuthTest</span><span style="color: #CF222E">.</span><span style="color: #0550AE">php</span><span style="color: #24292F">:</span><span style="color: #0550AE">60</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">56▕</span><span style="color: #24292F">             </span><span style="color: #0A3069">'password_confirmation'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0A3069">'ValidPassword'</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">57▕</span><span style="color: #24292F">             </span><span style="color: #0A3069">'role_id'</span><span style="color: #24292F"> </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> </span><span style="color: #0550AE">Role</span><span style="color: #CF222E">::</span><span style="color: #0550AE">ROLE_USER</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">58▕</span><span style="color: #24292F">         ]);</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">59▕</span></span>
<span><span style="color: #24292F">  </span><span style="color: #0550AE">➜</span><span style="color: #24292F">  </span><span style="color: #0550AE">60▕</span><span style="color: #24292F">         $response</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">assertStatus</span><span style="color: #24292F">(</span><span style="color: #0550AE">200</span><span style="color: #24292F">)</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">assertJsonStructure</span><span style="color: #24292F">([</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">61▕</span><span style="color: #24292F">             </span><span style="color: #0A3069">'access_token'</span><span style="color: #24292F">,</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">62▕</span><span style="color: #24292F">         ]);</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">63▕</span><span style="color: #24292F">     }</span></span>
<span><span style="color: #24292F">     </span><span style="color: #0550AE">64▕</span></span>
<span></span>
<span></span>
<span><span style="color: #24292F">  </span><span style="color: #953800">Tests</span><span style="color: #24292F">:    </span><span style="color: #0550AE">3</span><span style="color: #24292F"> </span><span style="color: #8250DF">failed</span><span style="color: #24292F"> (</span><span style="color: #0550AE">2</span><span style="color: #24292F"> </span><span style="color: #0550AE">assertions</span><span style="color: #24292F">)</span></span>
<span><span style="color: #24292F">  </span><span style="color: #953800">Duration</span><span style="color: #24292F">: </span><span style="color: #0550AE">11.55s</span></span>
<span></span>
<span></span></code></pre><button id="clipButton-60" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-60"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
                </div>
                                                            <div class="comments-reactions">
                                                                                        <div x-data="{ open: false }" @click.outside="open = false" class="comments-reaction-picker">
                                                                            <button class="comments-reaction-picker-trigger" type="button" @click="open = !open">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="comments-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                        </button>
                                        <div class="comments-modal is-compact is-left" x-show="open" compact="compact" left="left" style="display: none;">
        <div class="comments-modal-contents">
        <div class="comments-reaction-picker-reactions">
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👍&#39;)">
                                                        👍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;🥳&#39;)">
                                                        🥳
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👀&#39;)">
                                                        👀
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;😍&#39;)">
                                                        😍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;💅&#39;)">
                                                        💅
                                                    </button>
                                                                                            </div>
    </div>
</div>
                                                                    </div>
                                                    </div>
                                                        </div>
    </div>

    
        
            <div class="comments-nested">
                                                                                            <div class="comments-form comments-reply">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                <form class="comments-form-inner" wire:submit.prevent="reply">
            <div x-data="{ isExpanded: false }" x-init="
                    $wire.on(&#39;reply-4415&#39;, () =&gt; {
                        isExpanded = false;
                    });
                ">
                <input x-show="!isExpanded" @click="isExpanded = true" @focus="isExpanded = true" class="comments-placeholder" placeholder="Leave a reply">
                <div x-show="isExpanded" style="display: none;">
                    <div>
                        <div x-data="compose({ text: window.Livewire.find(&#39;MWrNybvOwZQZJ6Ygykyb&#39;).entangle(&#39;replyText&#39;), autofocus: true })" x-init="
        $wire.on(&#39;comment&#39;, clear);
                    $wire.on(&#39;reply-4415&#39;, () =&gt; {
                clear();
            });
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a reply" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a reply</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                                <button type="submit" class="comments-button" submit="submit">
    Reply
</button>
                        <button type="button" class="comments-button is-link" link="link" @click="isExpanded = false">
    Cancel
</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
                                                </div>
            </div>

<!-- Livewire Component wire-end:MWrNybvOwZQZJ6Ygykyb -->                                                <div wire:id="LqkSHr5jQXrVE4sbsqN7" id="comment-4416" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-4416&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/1751356651b2e610280f4fd399f16223.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    jwinder
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-4416" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            1 month ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Yeah, your'e getting a server side error when you are supposed to be asserting the 422 client error(for the first case). The server indeed does understand your request, but it cannot process it due to (most of the time) two scenarios:</p>
<ol>
<li>You have a corrupt database table you need to regmigrate (do you remember if you made any recent changes right before this error popped up?) It also help to look up the user in the DB you're testing to see if their proper role and other parameters you're using for your case are what they should be.</li>
<li>You have a semantic error somewhere in your code, the server is indeed processing your request, but its refusing to because you wrote incorrect or out of date syntax for whatever you're trying to do. Im assuming you know this, but check the laravel.logs in the storage directory, thats very first place i would go (im sure you probably already did that). Or, get creative with the laravel LOG facade and find places in your code you'd want to see in your storage logs. Guarantee its one of those two, you can smite me if Im wrong lol</li>
<li>If its none of those, dig into the server configuration. See if there are any server events logged that is informing you of an issue. Sometimes 500s can mean its not configured properly or somehow somthing was done to change that. .htaccess checking can sometimes be helpful. I think your middle error is cause you're using an instance of your Tests\Feature\AuthTest class that doesnt know what that static method is unless somehow i forgot that TestClasses can have methods such as assertStatus recognized without having to instantaniate Illuminate\HTTP\Response one or whatever its called.</li>
</ol>
<p>public function testHomePage()
{
$response = $this-&gt;get('/');</p>
<div class="relative code-block-wrapper"><pre style="background-color: #ffffff"><code id="clipText-61"><span><span style="color: #24292F">    $response</span><span style="color: #CF222E">-&gt;</span><span style="color: #8250DF">assertStatus</span><span style="color: #24292F">(</span><span style="color: #0550AE">200</span><span style="color: #24292F">);</span></span>
<span><span style="color: #24292F">}</span></span>
<span></span></code></pre><button id="clipButton-61" class="md:block hidden copyBtn" aria-label="Copy to Clipboard" title="Copy to Clipboard" data-clipboard-target="#clipText-61"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="fill-current text-white w-6 h-6"><path fill-rule="evenodd" d="M10.5 3A1.501 1.501 0 009 4.5h6A1.5 1.5 0 0013.5 3h-3zm-2.693.178A3 3 0 0110.5 1.5h3a3 3 0 012.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 01-3 3H6.75a3 3 0 01-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15z" clip-rule="evenodd"></path></svg></button></div>
<p>Some of the ways to assert are different if you are using Lumen's Laravel\Lumen\Testing\TestCase vs Laravel's default Illuminate\Foundation\Testing\TestCase.</p>
<p>but im pretty sure if that was the issue you can get the response you need to be able to assert that status</p>

                </div>
                                                            <div class="comments-reactions">
                                                            <div wire:key="4416👍" wire:click="toggleReaction(&#39;👍&#39;)" class="comments-reaction">
                                    👍 1
                                </div>
                                                                                        <div x-data="{ open: false }" @click.outside="open = false" class="comments-reaction-picker">
                                                                            <button class="comments-reaction-picker-trigger" type="button" @click="open = !open">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="comments-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                        </button>
                                        <div class="comments-modal is-compact is-left" x-show="open" compact="compact" left="left" style="display: none;">
        <div class="comments-modal-contents">
        <div class="comments-reaction-picker-reactions">
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction is-reacted" wire:click="toggleReaction(&#39;👍&#39;)">
                                                        👍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;🥳&#39;)">
                                                        🥳
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;👀&#39;)">
                                                        👀
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;😍&#39;)">
                                                        😍
                                                    </button>
                                                                                                                                                        <button type="button" class="comments-reaction-picker-reaction" wire:click="toggleReaction(&#39;💅&#39;)">
                                                        💅
                                                    </button>
                                                                                            </div>
    </div>
</div>
                                                                    </div>
                                                    </div>
                                                        </div>
    </div>

    
        
            <div class="comments-nested">
                                                                            <div wire:id="3OIhkHRSk7lUd01jUnvM" id="comment-4417" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-4417&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/1751356651b2e610280f4fd399f16223.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    jwinder
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-4417" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            1 month ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Njuguna Mwangi post is an interesting solution i didnt think about. That also somewhat relates with what I posted earlier.. Sometimes when you run DB tests especially when you're first learning, it can unfortunately have an unitended impact such as your DB data changing. I think theres a trait if im not mistaken that without  your intention can make changes to your table and its data.</p>
<p>class SomeTestn
use RefreshDatabase;</p>
<p>that one in particular. Sorry for the long post but i felt compelled to answer my theories on this issue cause i went through the same frustrating process when i followed the tutorial to a T</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:3OIhkHRSk7lUd01jUnvM -->                                                                                <div wire:id="1uSZ6VHjWCj8hyDslcOB" id="comment-4418" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-4418&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/c85b792036af80dc24e14cf5f24e6984.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    Modestas
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-4418" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            1 month ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Since that is a 500 error, you need to take a look at <code>laravel.log</code> file - it will tell you what the error is.</p>
<p>Since you have asked the same question on Discord (I assume, because it's the same error, but different username) - the issue is with missing namespace use in your <code>RegisterController</code>. It is in an intermediate step where it was introduced, but you missed it (Double checked that this is in a tutorial too!). Add the namespace there and you should be good to go!</p>
<p>ps. A thing that can be learned here is - if your test fails with 500 error, you can go into <code>laravel.log</code> and find the stacktrace of the issue itself :)</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:1uSZ6VHjWCj8hyDslcOB -->                                                                                <div wire:id="m4TpgK8LGq6WgDOQaLIo" id="comment-4450" class="comments-group comments-group-with-avatars" x-data="{ confirmDelete: false, urlCopied: false }" x-effect="
        if (urlCopied) {
            window.navigator.clipboard.writeText(window.location.href.split(&#39;#&#39;)[0] + &#39;#comment-4450&#39;);
            window.setTimeout(() =&gt; urlCopied = false, 2000);
        }
    ">
    <div class="comments-comment">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/5c28cabc1825e84c30ef5430ad41b33e.png" alt="avatar">
                <div class="comments-comment-inner">
            <div class="comments-comment-header">
                                    limewater23
                                <ul class="comments-comment-header-actions">
                    <li>
                        <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user#comment-4450" @click.prevent="urlCopied = true">
                            <time datetime="$date-&gt;format(&#39;Y-m-d H:i:s&#39;)" class="comments-date">
            1 month ago
    </time>
                            <span class="comments-comment-header-copied" x-show="urlCopied" style="display: none;">
                                ✓ Link copied!
                            </span>
                        </a>
                    </li>
                                                                                                                            </ul>
            </div>
                                        <div class="comment-text">
                    <p>Thank you guys, I think I missed out put the public function role() belongs to in User Model, because I didn't see in Role model to put hasMany users in it, usually it's a pair action (in both Models), so I forgot that part, I guess the error number from there, oh, I forget to say, I git reverted, and follow the tutorial step by step again, I found out that, but this time, it works</p>

                </div>
                                    </div>
    </div>

    </div>

<!-- Livewire Component wire-end:m4TpgK8LGq6WgDOQaLIo -->                                                                                                <div class="comments-form comments-reply">
                    <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                <form class="comments-form-inner" wire:submit.prevent="reply">
            <div x-data="{ isExpanded: false }" x-init="
                    $wire.on(&#39;reply-4416&#39;, () =&gt; {
                        isExpanded = false;
                    });
                ">
                <input x-show="!isExpanded" @click="isExpanded = true" @focus="isExpanded = true" class="comments-placeholder" placeholder="Leave a reply">
                <div x-show="isExpanded" style="display: none;">
                    <div>
                        <div x-data="compose({ text: window.Livewire.find(&#39;LqkSHr5jQXrVE4sbsqN7&#39;).entangle(&#39;replyText&#39;), autofocus: true })" x-init="
        $wire.on(&#39;comment&#39;, clear);
                    $wire.on(&#39;reply-4416&#39;, () =&gt; {
                clear();
            });
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a reply" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px;"><div style="position: relative;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a reply</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code" role="presentation"></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px;"></div><div class="CodeMirror-gutters" style="display: none;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                                <button type="submit" class="comments-button" submit="submit">
    Reply
</button>
                        <button type="button" class="comments-button is-link" link="link" @click="isExpanded = false">
    Cancel
</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
                                                </div>
            </div>

<!-- Livewire Component wire-end:LqkSHr5jQXrVE4sbsqN7 -->                    
        
    
            <div class="comments-form">
                            <img class="comments-avatar" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/d0c8c87b750898473bb25bfe1d4d4a9c.png" alt="avatar">
                        <form class="comments-form-inner" wire:submit.prevent="comment">
                <div x-data="compose({ text: window.Livewire.find(&#39;zXcJqCD03MaCPNLGdrvo&#39;).entangle(&#39;text&#39;), autofocus: false })" x-init="
        $wire.on(&#39;comment&#39;, clear);
            ">
    <div wire:ignore="">
        <textarea placeholder="Leave a comment" style="display: none;"></textarea><div class="EasyMDEContainer" role="application"><div class="editor-toolbar" role="toolbar"><button class="bold" type="button" title="Bold (Ctrl-B)" aria-label="Bold" tabindex="-1"><i class="fa fa-bold"></i></button><button class="italic" type="button" title="Italic (Ctrl-I)" aria-label="Italic" tabindex="-1"><i class="fa fa-italic"></i></button><i class="separator">|</i><button class="quote" type="button" title="Quote (Ctrl-&#39;)" aria-label="Quote" tabindex="-1"><i class="fa fa-quote-left"></i></button><button class="unordered-list" type="button" title="Generic List (Ctrl-L)" aria-label="Generic List" tabindex="-1"><i class="fa fa-list-ul"></i></button><button class="ordered-list" type="button" title="Numbered List (Ctrl-Alt-L)" aria-label="Numbered List" tabindex="-1"><i class="fa fa-list-ol"></i></button><i class="separator">|</i><button class="link" type="button" title="Create Link (Ctrl-K)" aria-label="Create Link" tabindex="-1"><i class="fa fa-link"></i></button></div><div class="CodeMirror cm-s-easymde CodeMirror-wrap CodeMirror-empty" translate="no" style="clip-path: inset(0px);"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 14.7227px; left: 14.7222px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" style="min-height: 300px;"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: -18px; border-right-width: 32px; min-height: 32px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><pre class="CodeMirror-placeholder CodeMirror-line-like" style="height: 0px; overflow: visible; direction: ltr;">Leave a comment</pre><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 3.99305px; top: 0px; height: 23.9931px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 32px; width: 1px; border-bottom: 0px solid transparent; top: 32px;"></div><div class="CodeMirror-gutters" style="display: none; height: 64px;"></div></div></div><div class="editor-preview-side editor-preview"></div></div>
    </div>
    
    <div class="comments-form-editor-tip">
        You can use <a href="https://spatie.be/markdown" target="_blank" rel="nofollow noopener noreferrer">Markdown</a>
    </div>
</div>

                                <button type="submit" class="comments-button" submit="submit">
    Comment
</button>
            </form>
        </div>
        </section>

<!-- Livewire Component wire-end:zXcJqCD03MaCPNLGdrvo -->                                            </div>
                </div>

                <aside class="relative overflow-hidden">
            <div class="">
    <p class="flex items-center justify-between text-sm font-medium">
        <span>Progress</span>

                    <span class="text-gray-300">0%</span>
            </p>

    <div class="w-full mt-1 h-2.5 shadow-inner bg-gray-900 rounded-full relative">
        <div class="absolute inset-y-0 left-0 w-1/3 rounded-full bg-primary-500" style="width: 0%"></div>

        <span class="sr-only">0%</span>
    </div>
</div>
            
    <div class="mt-4 relative h-[50vh] md:h-full overflow-y-auto">
        <div class="absolute inset-0">
            <ol class="pb-32 space-y-2">
                                    <li>
                        <h3 class="sticky top-0 pb-2 text-sm font-medium text-gray-300 bg-gray-800">Users and Roles</h3>

                        <ol class="space-y-0.5">
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/roles-permissions-structure-owner-user" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">01</span>

                                        <h4 class="text-sm font-medium text-primary-400">
                                            Roles/Permissions Structure: Owner/User
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            4065 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/profile-fields" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">02</span>

                                        <h4 class="text-sm font-medium">
                                            Profile Fields Structure
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            1781 words
                                                                                    </div>
                                    </a>
                                </li>
                                                    </ol>
                    </li>
                                    <li>
                        <h3 class="sticky top-0 pb-2 text-sm font-medium text-gray-300 bg-gray-800">Properties and Apartments</h3>

                        <ol class="space-y-0.5">
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/countries-cities-geographical-objects" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">03</span>

                                        <h4 class="text-sm font-medium">
                                            Countries, Cities, Geographical Objects
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            1487 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/search-property-by-city" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">04</span>

                                        <h4 class="text-sm font-medium">
                                            Search for Property by City or GeoObject
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            1339 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/apartment-search-number-of-guests" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">05</span>

                                        <h4 class="text-sm font-medium">
                                            Apartment Search by Number of Guests
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            906 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/show-apartment-size-type-and-beds" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">06</span>

                                        <h4 class="text-sm font-medium">
                                            Show Apartment Size, Type and Beds
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            1703 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/optimize-search-json-api-resources" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">07</span>

                                        <h4 class="text-sm font-medium">
                                            Optimize Search JSON with API Resources
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            3381 words
                                                                                    </div>
                                    </a>
                                </li>
                                                    </ol>
                    </li>
                                    <li>
                        <h3 class="sticky top-0 pb-2 text-sm font-medium text-gray-300 bg-gray-800">Facilities</h3>

                        <ol class="space-y-0.5">
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/facility-structure-show-property-details" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">08</span>

                                        <h4 class="text-sm font-medium">
                                            Facility Structure: Show Property Details
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            1881 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/show-facilities-apartment-details" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">09</span>

                                        <h4 class="text-sm font-medium">
                                            Show Facilities in Apartment Details
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            767 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/filter-properties-most-popular-facilities" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">10</span>

                                        <h4 class="text-sm font-medium">
                                            Filter Properties by Most Popular Facilities
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            1575 words
                                                                                    </div>
                                    </a>
                                </li>
                                                    </ol>
                    </li>
                                    <li>
                        <h3 class="sticky top-0 pb-2 text-sm font-medium text-gray-300 bg-gray-800">Apartment Bookings</h3>

                        <ol class="space-y-0.5">
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/unplanned-bug-fixing-limitation-query" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">11</span>

                                        <h4 class="text-sm font-medium">
                                            "Unplanned" Bug; Fixing Limitation Query
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            1305 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/property-photos-upload-show" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">12</span>

                                        <h4 class="text-sm font-medium">
                                            Property Photos: Upload and Show URLs
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            2179 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/apartment-prices-per-calendar-days" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">13</span>

                                        <h4 class="text-sm font-medium">
                                            Apartment Prices per Calendar Days
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            2255 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/make-bookings-view-cancel" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">14</span>

                                        <h4 class="text-sm font-medium">
                                            Make Bookings and View/Cancel Them
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            2736 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/ratings-ordering-search-results" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">15</span>

                                        <h4 class="text-sm font-medium">
                                            Ratings: Order/Show in Search Results
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            1326 words
                                                                                    </div>
                                    </a>
                                </li>
                                                    </ol>
                    </li>
                                    <li>
                        <h3 class="sticky top-0 pb-2 text-sm font-medium text-gray-300 bg-gray-800">Performance Optimizations</h3>

                        <ol class="space-y-0.5">
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/search-results-pagination" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">16</span>

                                        <h4 class="text-sm font-medium">
                                            Search Results Pagination
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            1667 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/seeding-data-optimizations" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">17</span>

                                        <h4 class="text-sm font-medium">
                                            Seeding Big(ger) Data with Optimizations
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            2554 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/optimizing-search-endpoint" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">18</span>

                                        <h4 class="text-sm font-medium">
                                            Optimizing Search Endpoint
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            3288 words
                                                                                    </div>
                                    </a>
                                </li>
                                                    </ol>
                    </li>
                                    <li>
                        <h3 class="sticky top-0 pb-2 text-sm font-medium text-gray-300 bg-gray-800">Improving Automated Tests: TDD and Pest</h3>

                        <ol class="space-y-0.5">
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/feature-to-unit-test-tdd-service" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">19</span>

                                        <h4 class="text-sm font-medium">
                                            Feature to Unit Test with TDD and Service
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            1906 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/tests-cleanup-factories" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">20</span>

                                        <h4 class="text-sm font-medium">
                                            Tests "Cleanup" with Factories
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            1716 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/migrating-phpunit-tests-to-pest" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">21</span>

                                        <h4 class="text-sm font-medium">
                                            Migrating PHPUnit Tests to Pest
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            492 words
                                                                                    </div>
                                    </a>
                                </li>
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/more-pest-features" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">22</span>

                                        <h4 class="text-sm font-medium">
                                            Using More Pest Features
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            1331 words
                                                                                    </div>
                                    </a>
                                </li>
                                                    </ol>
                    </li>
                                    <li>
                        <h3 class="sticky top-0 pb-2 text-sm font-medium text-gray-300 bg-gray-800">Bonus Lessons</h3>

                        <ol class="space-y-0.5">
                                                            <li>
                                    <a href="https://laraveldaily.com/lesson/booking-api-laravel/generate-api-documentation-with-scribe" class="flex items-center gap-3 px-4 py-3 bg-gray-700 border-t border-gray-600 rounded-xl hover:text-primary-300 hover:bg-gray-700/80">
                                                                                                                                                                                        <svg class="w-5 h-5 text-gray-400 shrink-0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM7 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047l1.888.974V9.5a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V9s1.54-1.274 1.639-1.208zM5 11h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"></path>
</svg>                                                                                                                                    
                                        <span class="font-mono text-sm text-gray-400 tabular-nums">23</span>

                                        <h4 class="text-sm font-medium">
                                            Generate API Documentation with Scribe
                                        </h4>

                                        <div class="flex shrink-0 ml-auto font-mono text-sm text-gray-400 tabular-nums">
                                                                                            3041 words
                                                                                    </div>
                                    </a>
                                </li>
                                                    </ol>
                    </li>
                            </ol>
        </div>
    </div>

    <div class="absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t from-gray-800"></div>
</aside>
                            </div>
        </div>
    </section>

    <div class="h-px bg-gradient-to-r from-gray-800 via-primary-400 to-gray-800"></div>

    <footer class="relative py-16 overflow-hidden text-white bg-gradient-to-b from-gray-800 to-gray-900">
    <div class="absolute inset-x-0 top-0 flex flex-col items-center">
        <div class="w-1/2 h-2 rounded-b-full blur-xl bg-gradient-to-b from-primary-900 to-primary-700"></div>
    </div>

    <div class="container relative flex flex-col items-center max-w-xl">
        <a href="https://laraveldaily.com/" class="inline-flex items-center gap-3 text-xl font-bold">
            <div class="flex items-center justify-center w-8 h-8 rounded-lg shadow-lg border-y shadow-primary-700/20 bg-gradient-to-b from-primary-500 to-primary-600 border-t-primary-400 border-b-primary-700">
                <img class="w-4 h-4" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/mono.svg" alt="">
            </div>

            <span>Laravel Daily</span>
        </a>

        <form action="https://laraveldaily.us11.list-manage.com/subscribe/post?u=a459401212599a54203d036ee&amp;id=91c1337873" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" class="mt-16 space-y-2" novalidate="novalidate">
    <label for="mce-EMAIL" class="inline-block text-sm font-medium text-gray-300">
        Subscribe for 20+ new Laravel tutorials every week
    </label>

    <div class="relative flex items-center">
        <input id="mce-EMAIL" name="EMAIL" type="email" value="" required="" placeholder="E-mail address" class="py-3 pl-4 pr-12 text-sm transition bg-gray-700 border-0 border-t border-b rounded-lg placeholder:text-gray-400 focus:border-transparent focus:ring-2 focus:ring-primary-500 grow border-t-gray-600 border-b-transparent" aria-required="true">
        <button class="absolute flex items-center justify-center w-8 h-8 text-white rounded-md shadow-lg right-2 shadow-primary-700/30 border-y border-t-primary-400 border-b-primary-800 bg-gradient-to-b from-primary-500 to-primary-600">
            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"></path>
</svg>        </button>
    </div>

    <div id="mce-responses">
        <div class="response" id="mce-error-response" style="display:none"></div>
        <div class="response" id="mce-success-response" style="display:none"></div>
    </div>

    <p class="text-xs text-gray-400">
        You can unsubscribe at any time. You'll also get -20% off my courses!
    </p>

    <div style="position: absolute; left: -5000px;">
        <input tabindex="-1" name="b_a459401212599a54203d036ee_91c1337873" type="text" value="">
    </div>
</form>


        <ul class="flex flex-wrap items-center justify-center gap-4 mt-16">
            <li>
                <a class="inline-flex items-center gap-2 px-4 py-2 font-medium transition rounded-xl hover:bg-gray-800" href="https://www.youtube.com/c/LaravelDaily">
                    <svg class="w-5 h-5 text-[#FF0000]" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"></path>
</svg>
                    <span>YouTube</span>
                </a>
            </li>

            <li>
                <a class="inline-flex items-center gap-2 px-4 py-2 font-medium transition rounded-xl hover:bg-gray-800" href="https://twitter.com/dailylaravel">
                    <svg class="w-5 h-5 text-[#1DA1F2]" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"></path>
</svg>
                    <span>Twitter</span>
                </a>
            </li>

            <li>
                <a class="inline-flex items-center gap-2 px-4 py-2 font-medium transition rounded-xl hover:bg-gray-800" href="https://github.com/LaravelDaily">
                    <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
</svg>
                    <span>GitHub</span>
                </a>
            </li>
        </ul>

        <p class="mt-16 text-sm text-gray-400">© 2024 Laravel Daily
            <span class="px-2">·</span>
            <a href="https://laraveldaily.com/about-project" class="underline">About LaravelDaily</a>
            <span class="px-2">·</span>
            <a href="mailto:info@laraveldaily.com" class="underline">info@laraveldaily.com</a></p>
    </div>
</footer>
    <div x-data="{ top: true }" :class="{ &#39;hidden&#39;: top }" @scroll.window="top = (window.pageYOffset &lt; 200 ? true : false)" @click="window.scrollTo({ top: 0, behavior: &#39;smooth&#39; })" class="fixed hidden transition ease-linear bottom-10 w-16 h-16 bg-gray-700 border-t border-gray-600 rounded-r text-gray-400 shadow-sm hover:text-primary-300 hover:cursor-pointer hover:bg-gray-600 hover:border-gray-500">
    <div class="flex items-center justify-center h-full">
        <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
  <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0zm-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"></path>
</svg>    </div>
</div>

    <script src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/livewire.js.download" data-turbo-eval="false" data-turbolinks-eval="false"></script><script data-turbo-eval="false" data-turbolinks-eval="false">window.livewire = new Livewire();window.Livewire = window.livewire;window.livewire_app_url = '';window.livewire_token = '7W86ZkmJCOG4YVVdPcGQ9Ly89FCOAbAZpcjS1AS9';window.deferLoadingAlpine = function (callback) {window.addEventListener('livewire:load', function () {callback();});};let started = false;window.addEventListener('alpine:initializing', function () {if (! started) {window.livewire.start();started = true;}});document.addEventListener("DOMContentLoaded", function () {if (! started) {window.livewire.start();started = true;}});</script>
    <div wire:id="L94aFbz4wfrH1kG7ii4Q">
    <div x-data="Spotlight.config({ componentId: &#39;L94aFbz4wfrH1kG7ii4Q&#39;, placeholder: &#39;Search for anything: performance, services...&#39; })" x-show="isOpen" x-init="init()" class="fixed z-50 px-4 flex items-start justify-center inset-0 pt-36" @keydown.window.prevent.cmd.k="toggleOpen()" @keydown.window.prevent.ctrl.k="toggleOpen()" @keydown.window.prevent.cmd.slash="toggleOpen()" @keydown.window.prevent.ctrl.slash="toggleOpen()" @keydown.window.escape="isOpen = false" @toggle-spotlight.window="toggleOpen()" style="display: none;">
        <div x-show="isOpen" @click="isOpen = false" x-transition:enter="ease-out duration-200" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-150" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 transition-opacity" style="display: none;">
            
            <div class="absolute inset-0 bg-gray-900 opacity-75"></div>
        </div>

        
        <div x-show="isOpen" x-transition:enter="ease-out duration-200" x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100" x-transition:leave="ease-in duration-150" x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95" class="relative bg-gray-700 rounded-lg overflow-hidden shadow-2xl transform transition-all max-w-2xl w-full border-0 shadow-red-800/10 border-y border-t-gray-600 border-b-transparent" style="display: none;">
            
            <div class="relative">
                
                <div class="absolute h-full right-5 flex items-center">
                    <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" wire:loading.delay="">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                </div>

                <input @keydown.tab.prevent="" @keydown.prevent.stop.enter="go()" @keydown.prevent.arrow-up="selectUp()" @keydown.prevent.arrow-down="selectDown()" x-ref="input" x-model="input" type="text" class="appearance-none w-full bg-transparent px-6 py-4 md:text-xl placeholder-gray-400 border-0 focus:border-0 focus:border-transparent focus:shadow-none outline-none text-white focus:outline-none focus:ring-primary-500 font-medium" x-bind:placeholder="inputPlaceholder" placeholder="Search for anything: performance, services...">
            </div>

            
            <div class="border-t bg-gray-900 border-gray-800" x-show="filteredItems().length &gt; 0" style="display: none;">
                <ul x-ref="results" class="overflow-y-auto max-h-72">
                    <template x-for="(item, i) in filteredItems()" :key=""></template>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Livewire Component wire-end:L94aFbz4wfrH1kG7ii4Q -->    <script>
    if (window.Alpine) {
        console.warn(
            'Laravel Comments scripts were loaded after Alpine. ' +
            'Please ensure Alpine is loaded last so Laravel Comments can initialize first.'
        );
    }
</script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>
    <script>
        document.addEventListener("alpine:init", () => {
            window.Alpine.data("compose", ({ text, autofocus = false } = {}) => {
                // Store the editor as a non-reactive instance property
                let editor;

                return {
                    text,

                    init() {
                        if (editor) {
                            return;
                        }

                        const textarea = this.$el.querySelector("textarea");

                        if (!textarea) {
                            return;
                        }

                        this.loadEasyMDE().then(() => {
                            editor = new window.EasyMDE({
                                element: textarea,
                                hideIcons: [
                                    "heading",
                                    "image",
                                    "preview",
                                    "side-by-side",
                                    "fullscreen",
                                    "guide",
                                ],
                                autoDownloadFontAwesome:  true ,
                                spellChecker: false,
                                status: false,
                                insertTexts: {
                                    link: ["[",  "](https://)"],
                                },
                            });

                            editor.value(this.text);

                            if (autofocus) {
                                editor.codemirror.focus();
                                editor.codemirror.setCursor(editor.codemirror.lineCount(), 0);
                            }

                            editor.codemirror.on("change", () => {
                                this.text = editor.value();
                            });
                        });
                    },

                    clear() {
                        editor.value("");
                    },

                    loadEasyMDE() {
                        if (window.EasyMDE) {
                            return Promise.resolve();
                        }

                        const loadScript = new Promise((resolve) => {
                            const script = document.createElement("script");
                            script.src = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js";
                            script.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(script);
                        });

                        const loadCss = new Promise((resolve) => {
                            const link = document.createElement("link");
                            link.type = "text/css";
                            link.rel = "stylesheet";
                            link.href = "https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css";
                            link.addEventListener("load", resolve);
                            document.getElementsByTagName("head")[0].appendChild(link);
                        });

                        return Promise.all([loadScript, loadCss]);
                    },
                };
            });
        });
    </script>

    <script>
var next = document.querySelector('.lesson--complete--next')
if (next) {
    next.addEventListener('click', function () {
        let complete = document.querySelector('.lesson--complete')

        if (complete === null) {
            location.href = 'https://laraveldaily.com/lesson/booking-api-laravel/profile-fields'

            return
        }

        complete.click()

        function sleep (time) {
            return new Promise(resolve => setTimeout(resolve, time));
        }

        sleep(500).then(() => {
            location.href = 'https://laraveldaily.com/lesson/booking-api-laravel/profile-fields'
        })
    })
}
</script>
<script type="text/javascript" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/mc-validate.js.download"></script><script type="text/javascript">(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';}(jQuery));var $mcj = jQuery.noConflict(true);</script>



<div><div class="grecaptcha-badge" data-style="bottomright" style="width: 256px; height: 60px; position: fixed; visibility: hidden; display: block; transition: right 0.3s ease 0s; bottom: 14px; right: -186px; box-shadow: gray 0px 0px 5px; border-radius: 2px; overflow: hidden;"><div class="grecaptcha-logo"><iframe title="reCAPTCHA" width="256" height="60" role="presentation" name="a-a7hocvkay80y" frameborder="0" scrolling="no" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox allow-storage-access-by-user-activation" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/anchor.html"></iframe></div><div class="grecaptcha-error"></div><textarea id="g-recaptcha-response-100000" name="g-recaptcha-response" class="g-recaptcha-response" style="width: 250px; height: 40px; border: 1px solid rgb(193, 193, 193); margin: 10px 25px; padding: 0px; resize: none; display: none;"></textarea></div><iframe style="display: none;" src="./01 - Roles_Permissions Structure_ Owner_User _ Laravel Daily_files/saved_resource(1).html"></iframe></div></body></html>